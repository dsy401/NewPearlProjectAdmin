(this.webpackJsonpnewpearlprojectadmin=this.webpackJsonpnewpearlprojectadmin||[]).push([[0],{165:function(e,t,a){e.exports={card:"StaffInfo__card__1R6r_",edit:"StaffInfo__edit__2lm4r"}},212:function(e,t,a){e.exports={login:"Login__login__16MwG",loginForm:"Login__loginForm__XYJZW",loginFormButton:"Login__loginFormButton__3H_jT"}},316:function(e){e.exports=JSON.parse('{"Host":"http://thrivingbuilding.co.nz","TestHost":"http://localhost:5000"}')},324:function(e,t,a){e.exports={user:"DashboardBody__user__1xsQU"}},331:function(e,t,a){e.exports={add:"Brand__add__3CsGs"}},334:function(e,t,a){e.exports=a(672)},339:function(e,t,a){},340:function(e,t,a){},672:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(11),o=a.n(l),r=(a(339),a(4)),s=a(5),c=a(7),d=a(6),u=a(8),m=(a(340),a(212)),p=a.n(m),h=a(680),g=a(678),f=a(683),b=a(9),E=a(38),y=a(121),v=a.n(y);v.a.create({timeout:15e3,headers:{"Content-Type":"application/x-www-form-urlencoded"}}),v.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),v.a.interceptors.response.use((function(e){return e.data}),(function(e){return"Unauthorized Access"!==e.response.data&&401!==e.response.status||(localStorage.removeItem("token"),window.location="/login",alert("Login timeout, plz login again")),Promise.reject(e.response.data)}));for(var S=v.a,C=a(316).Host,O={Login:C+"/api/login",GetLottery:C+"/api/lottery",DeleteLottery:function(e){return C+"/api/lottery/"+e},AddLottery:C+"/api/lottery",UpdateLottery:function(e){return C+"/api/lottery/"+e},GetWebClient:C+"/api/contact",DeleteWebClient:function(e){return C+"/api/contact/"+e},TokenValidate:C+"/api/token_validate",GetLocalClient:C+"/api/local_client",DeleteLocalClient:function(e){return C+"/api/local_client/"+e},UpdateLocalClient:function(e){return C+"/api/local_client/"+e},AddLocalClient:C+"/api/local_client",GetStaff:C+"/api/staff",UpdateStaff:function(e){return C+"/api/staff/"+e},GetBrands:C+"/api/brand",PostBrands:C+"/api/brand",GetProductCategory:C+"/api/product_category",UploadImage:C+"/api/upload_image",UpdateProductCategory:function(e){return C+"/api/product_category/"+e},FirstProductCategory:function(e){return C+"/api/product_category/"+e},DeleteBrand:function(e){return C+"/api/brand/"+e},UpdateBrand:function(e){return C+"/api/brand/"+e},GetProducts:function(e){return C+"/api/product/"+e},CHANGEPASSWORD:function(e){return C+"/api/change_password/"+e},AddProduct:C+"/api/product",UpdateProduct:function(e){return C+"/api/product/"+e},AddStaff:C+"/api/staff",DeleteStaff:function(e){return C+"/api/staff/"+e},DeleteProduct:function(e){return C+"/api/product/"+e},AddNews:C+"/api/news",GetNews:C+"/api/news",DeleteNews:function(e){return C+"/api/news/"+e},GetsNewsContent:function(e){return C+"/api/news/"+e},UpdateNews:C+"/api/news",GetAbout:C+"/api/about",PostAbout:C+"/api/about",DeleteAbout:function(e){return C+"/api/about/"+e},UpdateAbout:function(e){return C+"/api/about/"+e},SendEmailToLocalClient:C+"/api/contact/local_client",SendTestEmailToPeople:C+"/api/contact/local_client/test",GetLocalClientByPageNumber:function(e){return C+"/api/local_client/pagination/"+e},GetMemberByPageNumber:function(e){return C+"/api/member/pagination/"+e},SearchMemberByPhoneNumber:function(e){return C+"/api/member/search/"+e},AddMember:C+"/api/member",AddPointToMember:function(e,t){return C+"/api/member/add_point/"+e+"/"+t},UsePointToMember:function(e,t){return C+"/api/member/use_point/"+e+"/"+t},GetMemberTransaction:function(e){return C+"/api/member_transaction/"+e}},M=function(e){return btoa(e+":unused")},_=function(e){return S({url:O.Login,method:"POST",data:e})},w=function(e,t){return S({url:O.CHANGEPASSWORD(t),method:"POST",data:e,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},L=function(e){return S({url:O.DeleteLottery(e),method:"DELETE",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},k=function(){return S({url:O.GetWebClient,method:"GET",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},j=function(e){return S({url:O.DeleteWebClient(e),method:"Delete",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},D=function(){return S({url:O.TokenValidate,method:"GET",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},P=function(e){return S({url:O.DeleteLocalClient(e),method:"DELETE",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},I=function(){return S({url:O.GetStaff,method:"GET"})},A=function(e,t){return S({url:O.UpdateStaff(e),method:"PUT",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))},data:t})},F=function(){return S({url:O.GetBrands,method:"GET"})},T=function(e){return S({headers:{Authorization:" Basic "+M(localStorage.getItem("token"))},url:O.PostBrands,method:"POST",data:e})},V=function(){return O.UploadImage},x=function(e){return S({method:"GET",url:O.FirstProductCategory(e)})},B=function(e){return S({method:"DELETE",url:O.DeleteBrand(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},H=function(e,t){return S({method:"PUT",url:O.UpdateBrand(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))},data:t})},N=function(e){return S({method:"GET",url:O.GetProducts(e)})},q=function(e){return S({method:"POST",data:e,url:O.AddProduct,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},U=function(e,t){return S({method:"PUT",data:t,url:O.UpdateProduct(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},R=function(e){return S({method:"POST",url:O.AddStaff,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))},data:e})},z=function(e){return S({method:"DELETE",url:O.DeleteStaff(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},G=function(e){return S({method:"DELETE",url:O.DeleteProduct(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},W=function(e){return S({method:"POST",url:O.AddNews,data:e,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},$=function(){return S({method:"GET",url:O.GetNews})},K=function(e){return S({method:"DELETE",url:O.DeleteNews(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},Y=function(e){return S({method:"GET",url:O.GetsNewsContent(e)})},Q=function(e){return S({method:"PUT",data:e,url:O.UpdateNews,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},J=function(){return S({method:"GET",url:O.GetAbout})},X=function(e){return S({method:"POST",url:O.PostAbout,data:e,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},Z=function(e){return S({method:"DELETE",url:O.DeleteAbout(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},ee=function(e,t){return S({method:"PUT",url:O.UpdateAbout(e),data:t,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},te=function(e){return S({method:"POST",url:O.SendEmailToLocalClient,data:e,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},ae=function(e){return S({method:"POST",url:O.SendTestEmailToPeople,data:e,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},ne=function(e){return S({method:"GET",url:O.GetLocalClientByPageNumber(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},ie=function(e){return S({method:"GET",url:O.GetMemberByPageNumber(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},le=function(e){return S({method:"GET",url:O.SearchMemberByPhoneNumber(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},oe=function(e){return S({method:"POST",url:O.AddMember,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))},data:e})},re=function(e){return S({method:"GET",url:O.GetMemberTransaction(e),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})},se=a(79),ce=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={height:window.innerHeight,isRedirect:!1},a.componentDidMount=function(){window.addEventListener("resize",(function(){a.setState({height:window.innerHeight})}))},a.componentWillUnmount=function(){window.removeEventListener("resize",(function(){console.log("window resize event removed")}))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var a=new FormData;a.append("username",t.username),a.append("password",t.password),_(a).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("name",e.data.user_name),localStorage.setItem("user_id",e.data.user_id),window.location="/dashboard"})).catch((function(e){alert(e.error_message)}))}}))},localStorage.getItem("token")&&(window.location="/dashboard"),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.height;return i.a.createElement("div",{style:{height:t},className:p.a.login},i.a.createElement("div",{className:p.a.loginForm},i.a.createElement(h.a.Title,{style:{textAlign:"center"},level:4},"Thriving Building System"),i.a.createElement(g.a,{onSubmit:this.handleSubmit},i.a.createElement(g.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(i.a.createElement(f.a,{prefix:i.a.createElement(b.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),i.a.createElement(g.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(i.a.createElement(f.a,{prefix:i.a.createElement(b.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),i.a.createElement(g.a.Item,null,i.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"loginFormButton"},"Log in")))))}}]),t}(n.Component),de=g.a.create({name:"normal_login"})(ce),ue=Object(se.g)(de),me=a(54),pe=function(){return i.a.createElement("div",null,"This page does not exist.")},he=a(101),ge=function(e){var t=e.component,a=Object(he.a)(e,["component"]);return i.a.createElement(se.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?i.a.createElement(t,e):i.a.createElement(se.a,{to:"/login"})}}))},fe=function(e,t,a,l){return function(n){function o(){var e,n;Object(r.a)(this,o);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(d.a)(o)).call.apply(e,[this].concat(l)))).componentDidMount=function(){t(a)},n}return Object(u.a)(o,n),Object(s.a)(o,[{key:"render",value:function(){return i.a.createElement(e,Object.assign({},this.props,{name:l}))}}]),o}(n.Component)},be=a(21),Ee=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){a.props.history.push("/dashboard/home")},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null)}}]),t}(n.Component),ye=a(673),ve=a(220),Se=a(160),Ce=a(674),Oe=a(324),Me=a.n(Oe),_e=a(681),we=function(e){return i.a.createElement(_e.a,{title:"Log out Confirmation",visible:e.visible,onOk:e.confirm,onCancel:e.hideModal,okText:"Confirm",cancelText:"Cancel"},i.a.createElement(h.a.Title,{level:3},"Are sure to log out"))},Le=ye.a.Header,ke=ye.a.Content,je=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={logoutModalVisible:!1},a.openLogoutModal=function(){a.setState({logoutModalVisible:!0})},a.DropDownMenu=i.a.createElement(ve.a,null,i.a.createElement(ve.a.Item,{key:"0"},i.a.createElement("a",{onClick:function(){a.props.history.push("/dashboard/changepassword")}},"Change Password")),i.a.createElement(ve.a.Divider,null),i.a.createElement(ve.a.Item,{key:"3",onClick:a.openLogoutModal},"Log Out")),a.hideLogoutModal=function(){a.setState({logoutModalVisible:!1})},a.LogoutHandler=function(){localStorage.removeItem("token"),localStorage.removeItem("name"),localStorage.removeItem("user_id"),window.location="/login"},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(n.Fragment,null,i.a.createElement(Le,{style:{background:"#fff"}},i.a.createElement("h1",{style:{float:"left",display:"inline-block"}},this.props.title),i.a.createElement("div",{style:{float:"right",display:"inline-block"}},i.a.createElement(Se.a,{overlay:this.DropDownMenu,trigger:["click"]},i.a.createElement("div",{className:Me.a.user},i.a.createElement(Ce.a,{icon:"user"})," ",localStorage.getItem("name")," ",i.a.createElement(b.a,{type:"down"}))))),i.a.createElement(ke,{style:{margin:"24px 16px 0",overflow:"initial"}},i.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:"82vh"}},this.props.children)),i.a.createElement(we,{hideModal:this.hideLogoutModal,confirm:this.LogoutHandler,visible:this.state.logoutModalVisible}))}}]),t}(n.Component),De=Object(se.g)(je),Pe=a(104),Ie=a(56),Ae=a(50),Fe=a(218),Te=a.n(Fe),Ve=a(65),xe=a(100),Be=a.n(xe),He=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(Ae.ChartCard,{title:"\u9500\u552e\u989d",action:i.a.createElement(Ve.a,{title:"\u6307\u6807\u8bf4\u660e"},i.a.createElement(b.a,{type:"info-circle-o"})),total:function(){return i.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Ae.yuan)(126560)}})},footer:i.a.createElement(Ae.Field,{label:"\u65e5\u5747\u9500\u552e\u989d",value:Be()(12423).format("0,0")}),contentHeight:46},i.a.createElement("span",null,"\u5468\u540c\u6bd4",i.a.createElement(Te.a,{flag:"up",style:{marginLeft:8,color:"rgba(0,0,0,.85)"}},"12%")),i.a.createElement("span",{style:{marginLeft:16}},"\u65e5\u73af\u6bd4",i.a.createElement(Te.a,{flag:"down",style:{marginLeft:8,color:"rgba(0,0,0,.85)"}},"11%")))}}]),t}(n.Component),Ne=a(30),qe=a.n(Ne),Ue=[],Re=(new Date).getTime(),ze=0;ze<20;ze+=1)Ue.push({x:qe()(new Date(Re+864e5*ze)).format("YYYY-MM-DD"),y:Math.floor(100*Math.random())+10});for(var Ge=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(Ae.ChartCard,{title:"\u8bbf\u95ee\u91cf",action:i.a.createElement(Ve.a,{title:"\u6307\u6807\u8bf4\u660e"},i.a.createElement(b.a,{type:"info-circle-o"})),total:Be()(8846).format("0,0"),footer:i.a.createElement(Ae.Field,{label:"\u65e5\u8bbf\u95ee\u91cf",value:Be()(1234).format("0,0")}),contentHeight:46},i.a.createElement(Ae.MiniBar,{height:46,data:Ue}))}}]),t}(n.Component),We=[],$e=0;$e<12;$e+=1)We.push({x:"".concat($e+1,"\u6708"),y:Math.floor(1e3*Math.random())+200});for(var Ke=function(){return i.a.createElement(Ae.Bar,{height:200,title:"\u9500\u552e\u989d\u8d8b\u52bf",data:We})},Ye=[],Qe=0;Qe<20;Qe+=1)Ye.push({x:(new Date).getTime()+18e5*Qe,y1:Math.floor(100*Math.random())+1e3,y2:Math.floor(100*Math.random())+10});var Je=function(){return i.a.createElement(Ae.TimelineChart,{height:200,data:Ye,titleMap:{y1:"\u5ba2\u6d41\u91cf",y2:"\u652f\u4ed8\u7b14\u6570"}})},Xe=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(De,{title:this.props.name},i.a.createElement("div",null,i.a.createElement(Pe.a,{type:"flex",justify:"space-between"},i.a.createElement(Ie.a,{span:5},i.a.createElement(He,null)),i.a.createElement(Ie.a,{span:5},i.a.createElement(He,null)),i.a.createElement(Ie.a,{span:5},i.a.createElement(He,null)),i.a.createElement(Ie.a,{span:5},i.a.createElement(Ge,null)),i.a.createElement(Ie.a,{style:{marginTop:20},span:24},i.a.createElement(Ke,null)),i.a.createElement(Ie.a,{style:{marginTop:20},span:24},i.a.createElement(Je,null)))))}}]),t}(n.Component),Ze=a(41),et=a(120),tt=a(675),at=a(676),nt=a(68),it=et.a.Option,lt=g.a.create({name:"normal_login"})(Object(be.b)((function(e){return{lotteryData:e.lotteryReducer}}),(function(e){return{SetData:function(t){e({type:"setData",payload:t})}}}))((function(e){var t=e.form.getFieldDecorator;return i.a.createElement(g.a,{onSubmit:function(t){e.submit(t,(function(){e.form.validateFields((function(t,a){if(!t){var n=new FormData;n.append("name",a.name),n.append("gender",a.gender),n.append("phone",a.phone),e.setIsLoading(!0),function(e){return S({url:O.AddLottery,method:"POST",data:e,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})}(n).then((function(t){e.setIsLoading(!1),setTimeout((function(){e.closeModal(),e.SetData(t.data)}),300)})).catch((function(e){alert("Server Error")}))}}))}))}},i.a.createElement(g.a.Item,{label:"name"},t("name",{rules:[{required:!0,message:"Please enter the name!"}]})(i.a.createElement(f.a,{placeholder:"name ..."}))),i.a.createElement(g.a.Item,{label:"phone"},t("phone",{rules:[{required:!0,message:"Please enter the phone!"},{min:7,message:"Phone number doesn't less than 7 digits"}]})(i.a.createElement(f.a,{placeholder:"phone number ..."}))),i.a.createElement(g.a.Item,{label:"gender"},t("gender",{rules:[{required:!0,message:"Please select the gender!"}]})(i.a.createElement(et.a,null,i.a.createElement(it,{value:"0"},"male"),i.a.createElement(it,{value:"1"},"female")))),i.a.createElement(g.a.Item,null,i.a.createElement(E.a,{key:"back",style:{marginRight:"10px"},onClick:e.closeModal},"Cancel"),i.a.createElement(E.a,{htmlType:"submit",type:"primary",loading:e.isLoading},"Submit")))}))),ot=function(e){var t=function(e,t){e.preventDefault(),t()},a=Object(n.useState)(!1),l=Object(nt.a)(a,2),o=l[0],r=l[1];return i.a.createElement(_e.a,{visible:e.visible,title:"Add Lottery",onOk:t,onCancel:e.closeModal,footer:[]},i.a.createElement(lt,{isLoading:o,submit:t,setIsLoading:r,closeModal:e.closeModal}))},rt=et.a.Option,st=i.a.createContext(),ct=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).getInput=function(){return"select"===a.props.inputType?i.a.createElement(et.a,null,i.a.createElement(rt,{value:"0"},"male"),i.a.createElement(rt,{value:"1"},"female")):i.a.createElement(f.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,l=n.editing,o=n.dataIndex,r=n.title,s=(n.inputType,n.record),c=(n.index,n.children),d=Object(he.a)(n,["editing","dataIndex","title","inputType","record","index","children"]);return i.a.createElement("td",d,l?i.a.createElement(g.a.Item,{style:{margin:0}},t(o,{rules:[{required:!0,message:"Please Input ".concat(r,"!")}],initialValue:s[o]})(a.getInput())):c)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(st.Consumer,null,this.renderCell)}}]),t}(i.a.Component),dt=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentWillUnmount=function(){a.setState=function(e){}},a.isEditing=function(e){return e.key===a.state.editingKey},a.DeleteHandler=function(e){a.setState({loading:!0}),L(e).then((function(e){a.setState({loading:!1},(function(){a.setState({data:e.data.map((function(e){return{name:e.name,phone:e.phone,gender:e.gender,key:e._id.$oid}}))})}))})).catch((function(e){a.setState({loading:!1}),alert("delete Fail, Plz try it later")}))},a.cancel=function(){a.setState({editingKey:""})},a.openLotteryAddModal=function(){a.setState({modalVisible:!0})},a.closeLotteryAddModal=function(){a.setState({modalVisible:!1})},a.state={data:[],modalVisible:!1,editingKey:"",loading:!1},a.columns=[{title:"name",dataIndex:"name",editable:!0},{title:"phone",dataIndex:"phone",editable:!0},{title:"gender",dataIndex:"gender",editable:!0},{title:"operation",dataIndex:"operation",render:function(e,t){var l=a.state.editingKey;return a.isEditing(t)?i.a.createElement("span",null,i.a.createElement(st.Consumer,null,(function(e){return i.a.createElement("a",{onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Save")})),i.a.createElement(tt.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},i.a.createElement("a",null,"Cancel"))):i.a.createElement(n.Fragment,null,i.a.createElement("a",{style:{marginRight:"10px"},disabled:""!==l,onClick:function(){return a.edit(t.key)}},"Edit"),i.a.createElement(tt.a,{title:"Sure to Delete?",onConfirm:function(){return a.DeleteHandler(t.key)}},i.a.createElement("a",{disabled:""!==l},"Delete")))}}],a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),S({url:O.GetLottery,method:"GET"}).then((function(t){e.setState({loading:!1},(function(){e.setState({data:t.data.map((function(e){return{name:e.name,phone:e.phone,gender:e.gender,key:e._id.$oid}}))})}))})).catch((function(t){e.setState({loading:!1}),alert("Server Error")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.lotteryData!==this.props.lotteryData&&this.setState({data:e.lotteryData.map((function(e){return{name:e.name,phone:e.phone,gender:e.gender,key:e._id.$oid}}))})}}]),Object(s.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields((function(e,n){if(!e){var i,l,o=new FormData;o.append("name",n.name),o.append("phone",n.phone),o.append("gender",n.gender),a.setState({loading:!0}),(i=t,l=o,S({url:O.UpdateLottery(i),method:"PUT",data:l,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})).then((function(e){a.setState({loading:!1},(function(){a.setState({data:e.data.map((function(e){return{name:e.name,phone:e.phone,gender:e.gender,key:e._id.$oid}})),editingKey:""})}))})).catch((function(e){a.setState({loading:!1}),console.log(e)}))}}))}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:ct}},a=this.columns.map((function(t){return t.editable?Object(Ze.a)({},t,{onCell:function(a){return{record:a,inputType:"gender"===t.dataIndex?"select":"text",dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t}));return i.a.createElement(st.Provider,{value:this.props.form},i.a.createElement(E.a,{onClick:this.openLotteryAddModal,type:"primary",style:{marginBottom:16}},"Add a row"),i.a.createElement(ot,{closeModal:this.closeLotteryAddModal,visible:this.state.modalVisible}),i.a.createElement(at.a,{loading:this.state.loading,components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{onChange:this.cancel}}))}}]),t}(i.a.Component),ut=g.a.create()(Object(be.b)((function(e){return{lotteryData:e.lotteryReducer}}))(dt)),mt=function(e){return i.a.createElement(De,{title:e.name},i.a.createElement("div",null,i.a.createElement(ut,null)))},pt=function(e){return new Date(1e3*parseInt(e.substring(0,8),16))},ht=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).DeleteHandler=function(e){a.setState({isLoading:!0}),j(e._id.$oid).then((function(e){a.setState({isLoading:!1},(function(){a.setState({clients:e.data.map((function(e,t){return e.key=t.toString(),e}))})}))})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a.columns=[{title:"Name",dataIndex:"name",key:"name"},{title:"Phone",dataIndex:"phone",key:"phone"},{title:"Email",dataIndex:"email",key:"email"},{title:"Date",dataIndex:"date",key:"date"},{title:"Action",dataIndex:"",key:"x",render:function(e){return i.a.createElement(tt.a,{title:"Sure to Delete?",onConfirm:function(){return a.DeleteHandler(e)}},i.a.createElement("a",null,"Delete"))}}],a.state={clients:[],isLoading:!1},a.componentDidMount=function(){a.FetchClients()},a.FetchClients=function(){a.setState({isLoading:!0},(function(){k().then((function(e){a.setState({clients:e.data.map((function(e,t){return e.key=t.toString(),e.date=qe()(pt(e._id.$oid)).format("MMMM Do YYYY, h:mm:ss a"),e})),isLoading:!1})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(De,{title:this.props.name},i.a.createElement("div",null,i.a.createElement(E.a,{loading:this.state.isLoading,disabled:this.state.isLoading,onClick:this.FetchClients,type:"primary",style:{marginBottom:16}},"Refresh"),i.a.createElement(at.a,{loading:this.state.isLoading,columns:this.columns,expandedRowRender:function(e){return i.a.createElement("p",{style:{margin:0}},e.message)},dataSource:this.state.clients})))}}]),t}(n.Component),gt=g.a.create({name:"normal_login"})(Object(be.b)((function(e){return{localClientData:e.localClientReducer}}),(function(e){return{SetData:function(t){e({type:"setData",payload:t})}}}))((function(e){var t=e.form.getFieldDecorator;return i.a.createElement(g.a,{onSubmit:function(t){e.submit(t,(function(){e.form.validateFields((function(t,a){if(!t){var n=new FormData;n.append("name",a.name),n.append("address",a.address),n.append("phone",a.phone),n.append("email",a.email),e.setIsLoading(!0),function(e){return S({url:O.AddLocalClient,method:"POST",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))},data:e})}(n).then((function(t){e.setIsLoading(!1),setTimeout((function(){e.closeModal(),e.refreshPage()}),300)})).catch((function(e){alert("Server Error")}))}}))}))}},i.a.createElement(g.a.Item,{label:"name"},t("name",{rules:[{required:!0,message:"Please enter the name!"}]})(i.a.createElement(f.a,{placeholder:"name ..."}))),i.a.createElement(g.a.Item,{label:"phone"},t("phone",{rules:[{required:!0,message:"Please enter the phone!"},{min:7,message:"Phone number doesn't less than 7 digits"}]})(i.a.createElement(f.a,{placeholder:"phone number ..."}))),i.a.createElement(g.a.Item,{label:"address"},t("address",{rules:[{required:!0,message:"Please enter the address!"}]})(i.a.createElement(f.a,{placeholder:"address ..."}))),i.a.createElement(g.a.Item,{label:"email"},t("email",{rules:[{required:!0,message:"Please enter the email!"}]})(i.a.createElement(f.a,{placeholder:"email ..."}))),i.a.createElement(g.a.Item,null,i.a.createElement(E.a,{style:{marginRight:"10px"},key:"back",onClick:e.closeModal},"Cancel"),i.a.createElement(E.a,{htmlType:"submit",type:"primary",loading:e.isLoading},"Submit")))}))),ft=function(e){var t=function(e,t){e.preventDefault(),t()},a=Object(n.useState)(!1),l=Object(nt.a)(a,2),o=l[0],r=l[1];return i.a.createElement(_e.a,{visible:e.visible,title:"Add Local Client",onOk:t,onCancel:e.closeModal,footer:[]},i.a.createElement(gt,{refreshPage:e.refreshPage,isLoading:o,submit:t,setIsLoading:r,closeModal:e.closeModal}))},bt=i.a.createContext(),Et=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).getInput=function(){return i.a.createElement(f.a,null)},a.renderCell=function(e){var t=e.getFieldDecorator,n=a.props,l=n.editing,o=n.dataIndex,r=n.title,s=(n.inputType,n.record),c=(n.index,n.children),d=Object(he.a)(n,["editing","dataIndex","title","inputType","record","index","children"]);return i.a.createElement("td",d,l?i.a.createElement(g.a.Item,{style:{margin:0}},t(o,{rules:[{required:!0,message:"Please Input ".concat(r,"!")}],initialValue:s[o]})(a.getInput())):c)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(bt.Consumer,null,this.renderCell)}}]),t}(i.a.Component),yt=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentWillUnmount=function(){a.setState=function(e){}},a.isEditing=function(e){return e.key===a.state.editingKey},a.DeleteHandler=function(e){a.setState({loading:!0}),P(e).then((function(e){1===a.state.data.length?a.setState({loading:!1,current_page_num:a.state.current_page_num-1},(function(){a.refreshPage()})):a.setState({loading:!1},(function(){a.refreshPage()}))})).catch((function(e){a.setState({loading:!1}),alert("delete Fail, Plz try it later")}))},a.cancel=function(){a.setState({editingKey:""})},a.pageChange=function(e,t){a.setState({loading:!0}),ne(e).then((function(t){a.setState({loading:!1},(function(){a.setState({data:t.data.data.map((function(e){return{name:e.name,phone:e.phone,address:e.address,email:e.email,key:e._id.$oid}})),total:t.data.total,current_page_num:e,editingKey:""})}))})).catch((function(e){a.setState({loading:!1}),alert("Server Error")}))},a.openLotteryAddModal=function(){a.setState({modalVisible:!0})},a.closeLotteryAddModal=function(){a.setState({modalVisible:!1})},a.refreshPage=function(){a.setState({loading:!0}),ne(a.state.current_page_num).then((function(e){a.setState({loading:!1},(function(){a.setState({data:e.data.data.map((function(e){return{name:e.name,phone:e.phone,address:e.address,email:e.email,key:e._id.$oid}})),total:e.data.total})}))})).catch((function(e){a.setState({loading:!1}),alert("Server Error")}))},a.state={data:[],modalVisible:!1,editingKey:"",loading:!1,total:1,current_page_num:1},a.columns=[{title:"name",dataIndex:"name",editable:!0},{title:"phone",dataIndex:"phone",editable:!0},{title:"address",dataIndex:"address",editable:!0},{title:"email",dataIndex:"email",editable:!0},{title:"operation",dataIndex:"operation",render:function(e,t){var l=a.state.editingKey;return a.isEditing(t)?i.a.createElement("span",null,i.a.createElement(bt.Consumer,null,(function(e){return i.a.createElement("a",{onClick:function(){return a.save(e,t.key)},style:{marginRight:8}},"Save")})),i.a.createElement(tt.a,{title:"Sure to cancel?",onConfirm:function(){return a.cancel(t.key)}},i.a.createElement("a",null,"Cancel"))):i.a.createElement(n.Fragment,null,i.a.createElement("a",{style:{marginRight:"10px"},disabled:""!==l,onClick:function(){return a.edit(t.key)}},"Edit"),i.a.createElement(tt.a,{title:"Sure to Delete?",onConfirm:function(){return a.DeleteHandler(t.key)}},i.a.createElement("a",{disabled:""!==l},"Delete")))}}],a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),ne(this.state.current_page_num).then((function(t){e.setState({loading:!1},(function(){e.setState({data:t.data.data.map((function(e){return{name:e.name,phone:e.phone,address:e.address,email:e.email,key:e._id.$oid}})),total:t.data.total})}))})).catch((function(t){e.setState({loading:!1}),alert("Server Error")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.localClientData!==this.props.localClientData&&this.setState({data:e.localClientData.map((function(e){return{name:e.name,phone:e.phone,address:e.address,email:e.email,key:e._id.$oid}}))})}}]),Object(s.a)(t,[{key:"save",value:function(e,t){var a=this;e.validateFields((function(e,n){if(!e){var i,l,o=new FormData;o.append("name",n.name),o.append("phone",n.phone),o.append("address",n.address),o.append("email",n.email),a.setState({loading:!0}),(i=t,l=o,S({url:O.UpdateLocalClient(i),method:"PUT",headers:{Authorization:" Basic "+M(localStorage.getItem("token"))},data:l})).then((function(e){a.setState({loading:!1},(function(){a.setState({editingKey:""},(function(){a.refreshPage()}))}))})).catch((function(e){a.setState({loading:!1}),console.log(e)}))}}))}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"render",value:function(){var e=this,t={body:{cell:Et}},a=this.columns.map((function(t){return t.editable?Object(Ze.a)({},t,{onCell:function(a){return{record:a,inputType:"gender"===t.dataIndex?"select":"text",dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(a)}}}):t}));return i.a.createElement(bt.Provider,{value:this.props.form},i.a.createElement(E.a,{onClick:this.openLotteryAddModal,type:"primary",style:{marginBottom:16}},"Add a row"),i.a.createElement(ft,{refreshPage:this.refreshPage,closeModal:this.closeLotteryAddModal,visible:this.state.modalVisible}),i.a.createElement(at.a,{loading:this.state.loading,components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row",pagination:{defaultPageSize:10,onChange:this.pageChange,total:this.state.total,current:this.state.current_page_num}}))}}]),t}(i.a.Component),vt=g.a.create()(Object(be.b)((function(e){return{localClientData:e.localClientReducer}}))(yt)),St=function(e){return i.a.createElement(De,{title:e.name},i.a.createElement("div",null,i.a.createElement(vt,null)))},Ct=a(158),Ot=a(686),Mt=a(165),_t=a.n(Mt),wt=a(677),Lt=g.a.create({name:"staff_modal_form"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).UNSAFE_componentWillReceiveProps=function(e){e.values!==a.props.values&&a.props.form.resetFields()},a.state={wechatFileList:[],imageFileList:[],isLoading:!1},a.wechatFile=function(e){return a.setState({wechatFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.onCancel=function(){a.props.hideModal()},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;n.append("role",t.role),n.append("role_cn",t.role_cn),n.append("facebook",t.facebook),n.append("linkedin",t.linkedin),0!==t.wechat.length?t.wechat[0].response.is_success&&n.append("wechat",t.wechat[0].response.data):n.append("wechat",a.props.values.wechat),0!==t.image.length?t.image[0].response.is_success&&n.append("image",t.image[0].response.data):n.append("image",a.props.values.image),a.setState({isLoading:!0}),A(a.props.values.id,n).then((function(e){a.setState({isLoading:!1},(function(){a.props.hideModalThenFetch()}))})).catch((function(e){a.setState({isLoading:!1})})),a.setState({imageFileList:[],wechatFileList:[]})}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{visible:this.props.visible,title:"Edit ".concat(this.props.values.name," Information"),okText:"Update",onCancel:function(){e.onCancel(),e.setState({imageFileList:[],wechatFileList:[]})},onOk:this.HandlerSubmit,confirmLoading:this.state.isLoading,destroyOnClose:!0},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"role"},t("role",{initialValue:this.props.values.role})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u804c\u4f4d"},t("role_cn",{initialValue:this.props.values.role_cn})(i.a.createElement(f.a,{type:"textarea"}))),i.a.createElement(g.a.Item,{label:"facebook"},t("facebook",{initialValue:this.props.values.facebook})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"linkedin"},t("linkedin",{initialValue:this.props.values.linkedin})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null))),i.a.createElement(g.a.Item,{label:"wechat"},t("wechat",{valuePropName:"wechat",getValueFromEvent:this.wechatFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.wechatFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))}}]),t}(n.Component)),kt=Object(be.b)((function(e){return{StaffInfoData:e.StaffInfoReducer}}),(function(e){return{SetData:function(t){e({type:"setData",payload:t})}}}))(Lt),jt=g.a.create({name:"staff_add_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={imageFileList:[],wechatFileList:[]},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.wechatFile=function(e){return a.setState({wechatFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;n.append("name",t.name),n.append("role",t.role),n.append("role_cn",t.role_cn),n.append("facebook",t.facebook),n.append("linkedin",t.linkedin),0!==t.wechat.length?t.wechat[0].response.is_success&&n.append("wechat",t.wechat[0].response.data):n.append("wechat",""),0!==t.image.length?t.image[0].response.is_success&&n.append("image",t.image[0].response.data):n.append("image",""),a.props.AddStaff(n,(function(){a.props.form.resetFields(),a.props.hideModal()})),a.setState({imageFileList:[],wechatFileList:[]})}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{visible:this.props.visible,title:"Add Staff",okText:"Add",style:{top:30},onCancel:function(){e.props.hideModal(),e.setState({imageFileList:[],wechatFileList:[]})},destroyOnClose:!0,onOk:this.HandlerSubmit,confirmLoading:this.props.isLoading},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"name"},t("name",{rules:[{required:!0,message:"Please enter the name!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"role"},t("role",{rules:[{required:!0,message:"Please enter the role!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u804c\u4f4d"},t("role_cn",{rules:[{required:!0,message:"Please enter the \u804c\u4f4d!"}]})(i.a.createElement(f.a,{type:"textarea"}))),i.a.createElement(g.a.Item,{label:"facebook"},t("facebook",{rules:[{required:!0,message:"Please enter the facebook!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"linkedin"},t("linkedin",{rules:[{required:!0,message:"Please enter the linkedin!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[],rules:[{required:!0,message:"Please upload the image!"}]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null))),i.a.createElement(g.a.Item,{label:"wechat"},t("wechat",{valuePropName:"wechat",getValueFromEvent:this.wechatFile,initialValue:[],rules:[{required:!0,message:"Please upload the wechat QR code image!"}]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.wechatFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))}}]),t}(n.Component)),Dt=function(e){return i.a.createElement(_e.a,{title:e.title,visible:e.visible,onOk:e.confirm,onCancel:e.hideModal,okText:"Confirm",cancelText:"Cancel",confirmLoading:e.isLoading},i.a.createElement(h.a.Title,{level:3},e.text))},Pt=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={data:[],EditModalVisible:!1,propsToModal:{name:"",role:"",role_cn:"",facebook:"",linkedin:"",id:"",wechat:"",image:""},isLoading:!1,AddModalVisible:!1,DeleteModalVisible:!1,DeletePerson:{name:"",id:""}},a.componentDidMount=function(){a.FetchStaff()},a.componentWillUnmount=function(){a.setState=function(e){}},a.FetchStaff=function(){a.setState({isLoading:!0}),I().then((function(e){a.setState({isLoading:!1},(function(){a.setState({data:e.data})}))})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a.openEditModal=function(e){a.setState({propsToModal:{name:e.name,role:e.role,role_cn:e.role_cn,facebook:e.facebook,linkedin:e.linkedin,wechat:e.wechat,image:e.image,id:e._id.$oid}},(function(){a.setState({EditModalVisible:!0})}))},a.hideEditModal=function(){a.setState({EditModalVisible:!1})},a.hideEditModalThenFetch=function(){a.setState({EditModalVisible:!1},(function(){a.FetchStaff()}))},a.hideAddModal=function(){a.setState({AddModalVisible:!1})},a.openAddModal=function(){a.setState({AddModalVisible:!0})},a.AddStaffHandler=function(e,t){a.setState({isLoading:!0}),R(e).then((function(e){a.setState({isLoading:!1,data:e.data},(function(){t()}))})).catch((function(e){console.log(e)}))},a.openDeleteModal=function(e){a.setState({DeletePerson:{name:e.name,id:e._id.$oid}},(function(){a.setState({DeleteModalVisible:!0})}))},a.hideDeleteModal=function(){a.setState({DeleteModalVisible:!1})},a.DeleteHandler=function(){a.setState({isLoading:!0}),z(a.state.DeletePerson.id).then((function(e){a.setState({data:e.data,isLoading:!1,DeleteModalVisible:!1})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.StaffInfoData!==this.props.StaffInfoData&&this.setState({data:e.StaffInfoData})}},{key:"render",value:function(){var e=this;return i.a.createElement(n.Fragment,null,i.a.createElement(De,{title:this.props.name},i.a.createElement(Ct.a,{style:{top:250},tip:"Loading...",spinning:this.state.isLoading},i.a.createElement(E.a,{onClick:this.openAddModal,style:{marginBottom:10},type:"primary"},"Add Staff"),i.a.createElement("div",null,this.state.data.map((function(t,a){return i.a.createElement("div",{key:a.toString(),className:_t.a.card},i.a.createElement(Ot.a,{style:{paddingBottom:"10px",margin:10},title:t.name,size:"default"},i.a.createElement(Ot.a.Item,{label:"Role"},t.role),i.a.createElement(Ot.a.Item,{label:"\u804c\u4f4d"},t.role_cn),i.a.createElement(Ot.a.Item,{label:"Operation"},i.a.createElement("div",null,i.a.createElement("span",{style:{marginRight:10},className:_t.a.edit,onClick:function(){e.openDeleteModal(t)}},"Delete"),i.a.createElement("span",{className:_t.a.edit,onClick:function(){e.openEditModal(t)}},"Edit"))),i.a.createElement(Ot.a.Item,{label:"image"},i.a.createElement("a",{href:t.image},i.a.createElement("img",{width:100,height:100,src:t.image}))),i.a.createElement(Ot.a.Item,{label:"wechat"},i.a.createElement("a",{href:t.wechat},i.a.createElement("img",{width:100,height:100,src:t.wechat})))))}))))),i.a.createElement(kt,{hideModalThenFetch:this.hideEditModalThenFetch,visible:this.state.EditModalVisible,hideModal:this.hideEditModal,values:this.state.propsToModal}),i.a.createElement(jt,{visible:this.state.AddModalVisible,hideModal:this.hideAddModal,isLoading:this.state.isLoading,AddStaff:this.AddStaffHandler}),i.a.createElement(Dt,{title:"Delete Confirmation",visible:this.state.DeleteModalVisible,confirm:this.DeleteHandler,hideModal:this.hideDeleteModal,text:"Are you sure to delete ".concat(this.state.DeletePerson.name),isLoading:this.state.isLoading}))}}]),t}(n.Component),It=Object(be.b)((function(e){return{StaffInfoData:e.StaffInfoReducer}}))(Pt),At=a(685),Ft=g.a.create({name:"add_company_description"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={imageFileList:[]},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;Object.keys(t).forEach((function(e){"image"===e||n.append(e,t[e])})),0!==t.image.length&&t.image[0].response.is_success?n.append("image",t.image[0].response.data):n.append("image",""),a.props.confirm(n),a.setState({imageFileList:[]})}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.state);var t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{style:{top:10},visible:this.props.visible,title:"Add About",okText:"Add",onCancel:function(){e.props.hideModal(),e.setState({imageFileList:[]})},onOk:this.HandlerSubmit,confirmLoading:this.props.isLoading,destroyOnClose:!0},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"timeline"},t("timeline",{rules:[{required:!0,message:"Please enter the timeline!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u65f6\u95f4\u7ebf"},t("timeline_cn",{rules:[{required:!0,message:"Please enter the \u65f6\u95f4\u7ebf!"}]})(i.a.createElement(f.a,{type:"textarea"}))),i.a.createElement(g.a.Item,{label:"description"},t("description",{rules:[{required:!0,message:"Please enter the description!"}]})(i.a.createElement(f.a.TextArea,{rows:4}))),i.a.createElement(g.a.Item,{label:"\u63cf\u8ff0"},t("description_cn",{rules:[{required:!0,message:"Please enter the chinese description!"}]})(i.a.createElement(f.a.TextArea,{rows:4}))),i.a.createElement(g.a.Item,{label:"subheading"},t("subheading",{rules:[{required:!0,message:"Please enter the chinese subheading!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u5b50\u6807\u9898"},t("subheading_cn",{rules:[{required:!0,message:"Please enter the chinese \u5b50\u6807\u9898!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,rules:[{required:!0,message:"Please upload image!"}]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))}}]),t}(n.Component)),Tt=g.a.create({name:"edit_company_description"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={imageFileList:[]},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;Object.keys(t).forEach((function(e){"image"===e||n.append(e,t[e])})),0!==t.image.length&&t.image[0].response.is_success?n.append("image",t.image[0].response.data):n.append("image",a.props.values.image),a.props.confirm(a.props.values.id,n,(function(){a.props.form.resetFields()})),a.setState({imageFileList:[]})}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{style:{top:10},visible:this.props.visible,title:"Add About",okText:"Add",onCancel:function(){e.props.hideModal(),e.setState({imageFileList:[]})},destroyOnClose:!0,onOk:this.HandlerSubmit,confirmLoading:this.props.isLoading},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"timeline"},t("timeline",{rules:[{required:!0,message:"Please enter the timeline!"}],initialValue:this.props.values.timeline})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u65f6\u95f4\u7ebf"},t("timeline_cn",{rules:[{required:!0,message:"Please enter the \u65f6\u95f4\u7ebf!"}],initialValue:this.props.values.timeline_cn})(i.a.createElement(f.a,{type:"textarea"}))),i.a.createElement(g.a.Item,{label:"description"},t("description",{rules:[{required:!0,message:"Please enter the description!"}],initialValue:this.props.values.description})(i.a.createElement(f.a.TextArea,{rows:4}))),i.a.createElement(g.a.Item,{label:"\u63cf\u8ff0"},t("description_cn",{rules:[{required:!0,message:"Please enter the chinese description!"}],initialValue:this.props.values.description_cn})(i.a.createElement(f.a.TextArea,{rows:4}))),i.a.createElement(g.a.Item,{label:"subheading"},t("subheading",{rules:[{required:!0,message:"Please enter the chinese subheading!"}],initialValue:this.props.values.subheading})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u5b50\u6807\u9898"},t("subheading_cn",{rules:[{required:!0,message:"Please enter the chinese \u5b50\u6807\u9898!"}],initialValue:this.props.values.subheading_cn})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))}}]),t}(n.Component)),Vt=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={isLoading:!1,data:[],AddModalVisible:!1,DeleteModalVisible:!1,EditModalVisible:!1,DeleteId:"",passToModal:{id:"",timeline:"",timeline_cn:"",image:"",description:"",description_cn:"",subheading:"",subheading_cn:""}},a.componentWillUnmount=function(){a.setState=function(e){}},a.componentDidMount=function(){a.setState({isLoading:!0}),J().then((function(e){a.setState({isLoading:!1,data:e.data})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.OpenAddModal=function(){a.setState({AddModalVisible:!0})},a.hideAddModal=function(){a.setState({AddModalVisible:!1})},a.AddAboutHandler=function(e){a.setState({isLoading:!0}),X(e).then((function(e){a.setState({isLoading:!1,data:e.data,AddModalVisible:!1})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.DeleteAboutHandler=function(){a.setState({isLoading:!0}),Z(a.state.DeleteId).then((function(e){a.setState({isLoading:!1,data:e.data,DeleteModalVisible:!1,DeleteId:""})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.hideDeleteModal=function(){a.setState({DeleteModalVisible:!1})},a.OpenDeleteModal=function(e){a.setState({DeleteModalVisible:!0,DeleteId:e})},a.hideEditModal=function(){a.setState({EditModalVisible:!1})},a.OpenEditModal=function(e){a.setState({EditModalVisible:!0},(function(){a.setState({passToModal:{id:e._id.$oid,timeline:e.timeline,timeline_cn:e.timeline_cn,image:e.image,description:e.description,description_cn:e.description_cn,subheading:e.subheading,subheading_cn:e.subheading_cn}})}))},a.EditHandler=function(e,t,n){a.setState({isLoading:!0}),ee(e,t).then((function(e){a.setState({isLoading:!1,EditModalVisible:!1,data:e.data,passToModal:{id:"",timeline:"",timeline_cn:"",image:"",description:"",description_cn:"",subheading:"",subheading_cn:""}},(function(){n()}))})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(De,{title:this.props.name},i.a.createElement(Ct.a,{style:{top:250},tip:"Loading...",spinning:this.state.isLoading},i.a.createElement(E.a,{onClick:this.OpenAddModal,type:"primary"},"Add more description"),i.a.createElement(At.a,{itemLayout:"vertical",size:"large",dataSource:this.state.data,renderItem:function(t){return i.a.createElement(At.a.Item,{actions:[i.a.createElement("a",{onClick:function(){e.OpenEditModal(t)},key:"list-loadmore-edit"},"edit"),i.a.createElement("a",{onClick:function(){e.OpenDeleteModal(t._id.$oid)},key:"list-loadmore-more"},"delete")],extra:i.a.createElement("img",{alt:"",width:272,src:t.image})},i.a.createElement(At.a.Item.Meta,{title:t.subheading,description:t.timeline}),t.description)}}))),i.a.createElement(Ft,{hideModal:this.hideAddModal,visible:this.state.AddModalVisible,isLoading:this.state.isLoading,confirm:this.AddAboutHandler}),i.a.createElement(Dt,{title:"Delete Confirmation",visible:this.state.DeleteModalVisible,confirm:this.DeleteAboutHandler,hideModal:this.hideDeleteModal,isLoading:this.state.isLoading,text:"Are you sure to delete it?"}),i.a.createElement(Tt,{hideModal:this.hideEditModal,visible:this.state.EditModalVisible,isLoading:this.state.isLoading,values:this.state.passToModal,confirm:this.EditHandler}))}}]),t}(n.Component),xt=a(679),Bt=a(331),Ht=a.n(Bt),Nt=g.a.create({name:"brand_add_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).UNSAFE_componentWillReceiveProps=function(){!1===a.props.visible&&a.props.form.resetFields()},a.state={isLoading:!1,imageFileList:[]},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;n.append("name",t.name),n.append("name_cn",t.name_cn),n.append("description",t.description),n.append("description_cn",t.description_cn),0!==t.image.length&&t.image[0].response.is_success?n.append("image",t.image[0].response.data):n.append("image",""),a.setState({isLoading:!0}),T(n).then((function(e){a.setState({isLoading:!1},(function(){a.props.hideModal(),a.props.SetData(e.data)}))})).catch((function(e){console.log(e),a.setState({isLoading:!1})})),a.setState({imageFileList:[]})}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{visible:this.props.visible,title:"Add brands",okText:"Add",onCancel:function(){e.props.hideModal(),e.setState({imageFileList:[]})},onOk:this.HandlerSubmit,destroyOnClose:!0,confirmLoading:this.state.isLoading},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"name"},t("name",{rules:[{required:!0,message:"Please enter the name!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u540d\u5b57"},t("name_cn",{rules:[{required:!0,message:"Please enter the chinese name!"}]})(i.a.createElement(f.a,{type:"textarea"}))),i.a.createElement(g.a.Item,{label:"description"},t("description",{rules:[{required:!0,message:"Please enter the description!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u63cf\u8ff0"},t("description_cn",{rules:[{required:!0,message:"Please enter the chinese description!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))}}]),t}(n.Component)),qt=Object(be.b)((function(e){return{BrandData:e.BrandReducer}}),(function(e){return{SetData:function(t){e({type:"setData",payload:t})}}}))(Nt),Ut=function(e){return i.a.createElement(_e.a,{title:"Delete Confirmation",visible:e.visible,onOk:function(){e.confirm(e.id)},confirmLoading:e.isLoading,onCancel:e.hideModal},i.a.createElement("p",null,"Are u sure to delete?"))},Rt=g.a.create({name:"brand_edit_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.state={imageFileList:[]},a.onCancel=function(){a.props.hideModal()},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;n.append("name",t.name),n.append("name_cn",t.name_cn),n.append("description",t.description),n.append("description_cn",t.description_cn),console.log(n.name),0!==t.image.length&&t.image[0].response.is_success?n.append("image",t.image[0].response.data):n.append("image",a.props.values.image),a.props.updataBrand(a.props.values.id,n),a.setState({imageFileList:[]})}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{visible:this.props.visible,title:"Edit ".concat(this.props.values.name," Information"),okText:"Update",onCancel:function(){e.onCancel(),e.setState({imageFileList:[]})},destroyOnClose:!0,onOk:this.HandlerSubmit,confirmLoading:this.props.isLoading},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"name"},t("name",{initialValue:this.props.values.name})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u540d\u5b57"},t("name_cn",{initialValue:this.props.values.name_cn})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"description"},t("description",{initialValue:this.props.values.description})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u63cf\u8ff0"},t("description_cn",{initialValue:this.props.values.description_cn})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))}}]),t}(n.Component)),zt=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={data:[],isLoading:!1,AddModalVisible:!1,DeleteConfirmModalVisible:!1,EditModalVisible:!1,currentBrandId:"",propsToModal:{id:"",name:"",name_cn:"",description:"",description_cn:"",image:""}},a.componentDidMount=function(){a.FetchBrands()},a.UpdateBrandHandler=function(e,t){a.setState({isLoading:!0}),H(e,t).then((function(e){a.setState({isLoading:!1},(function(){a.setState({data:e.data,EditModalVisible:!1})}))})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a.ConfirmDeleteBrandHandler=function(e){a.setState({isLoading:!0}),B(e).then((function(e){a.setState({isLoading:!1},(function(){a.setState({data:e.data,DeleteConfirmModalVisible:!1})}))})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.UNSAFE_componentWillReceiveProps=function(e){a.props.BrandData!==e.BrandData&&a.setState({data:e.BrandData})},a.hideDeleteConfirmModal=function(){a.setState({DeleteConfirmModalVisible:!1})},a.OpenAddModal=function(){a.setState({AddModalVisible:!0})},a.hideAddModal=function(){a.setState({AddModalVisible:!1})},a.hideEditModal=function(){a.setState({EditModalVisible:!1})},a.openEditModal=function(e){a.setState({propsToModal:{id:e._id.$oid,name:e.name,name_cn:e.name_cn,description:e.description,description_cn:e.description_cn,image:e.image}},(function(){a.setState({EditModalVisible:!0})}))},a.FetchBrands=function(){a.setState({isLoading:!0}),F().then((function(e){a.setState({isLoading:!1}),a.setState({data:e.data})})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a.componentWillUnmount=function(){a.setState=function(e){}},a.OpenDeleteConfirmModal=function(e){a.setState({currentBrandId:e},(function(){a.setState({DeleteConfirmModalVisible:!0})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(n.Fragment,null,i.a.createElement(De,{title:this.props.name},i.a.createElement(Ct.a,{style:{top:170},tip:"Loading...",spinning:this.state.isLoading},i.a.createElement(Pe.a,{gutter:[0,20]},this.state.data.map((function(t,a){return i.a.createElement(Ie.a,{key:a.toString(),span:8},i.a.createElement(xt.a,{title:t.name,style:{width:300},extra:i.a.createElement("div",null,i.a.createElement("a",{onClick:function(){e.openEditModal(t)}},"Edit"),i.a.createElement("a",{onClick:function(){e.OpenDeleteConfirmModal(t._id.$oid)},style:{marginLeft:10}},"Delete"))},i.a.createElement("img",{style:{width:"100%",height:"150px"},alt:"",src:"".concat(t.image)})))})),i.a.createElement(Ie.a,{span:8},i.a.createElement("div",{onClick:this.OpenAddModal,style:{opacity:this.state.isLoading?"0":"1"},className:Ht.a.add}))))),i.a.createElement(Rt,{visible:this.state.EditModalVisible,hideModal:this.hideEditModal,updataBrand:this.UpdateBrandHandler,isLoading:this.state.isLoading,values:this.state.propsToModal}),i.a.createElement(qt,{visible:this.state.AddModalVisible,hideModal:this.hideAddModal}),i.a.createElement(Ut,{visible:this.state.DeleteConfirmModalVisible,isLoading:this.state.isLoading,id:this.state.currentBrandId,hideModal:this.hideDeleteConfirmModal,confirm:this.ConfirmDeleteBrandHandler}))}}]),t}(n.Component),Gt=Object(be.b)((function(e){return{BrandData:e.BrandReducer}}))(zt),Wt=function(){return function(e){e({type:"BeforeFetchData"}),S({method:"GET",url:O.GetProductCategory}).then((function(t){return e({type:"FetchDataSuccess",payload:t.data})})).catch((function(t){return console.log(t),e({type:"FetchDataFail"})}))}},$t=function(e,t,a){return function(n){n({type:"BeforeFetchData"}),function(e,t){return S({method:"PUT",url:O.UpdateProductCategory(e),data:t,headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})}(e,t).then((function(e){n({type:"FetchDataSuccess",payload:e.data}),a()})).catch((function(e){console.log(e),n({type:"FetchDataFail"})}))}},Kt=g.a.create({name:"product_category_edit_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).UNSAFE_componentWillReceiveProps=function(e){e.values!==a.props.values&&a.props.form.resetFields()},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.state={imageFileList:[]},a.onCancel=function(){a.props.hideModal()},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;n.append("name",t.name),n.append("name_cn",t.name_cn),n.append("description",t.description),n.append("description_cn",t.description_cn),0!==t.image.length&&t.image[0].response.is_success?n.append("image",t.image[0].response.data):n.append("image",a.props.values.image),a.props.UpdateAndFetchProductCategory(a.props.values.id,n,(function(){a.onCancel()})),a.setState({imageFileList:[]})}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{visible:this.props.visible,title:"Edit ".concat(this.props.values.name," Information"),okText:"Update",onCancel:function(){e.onCancel(),e.setState({imageFileList:[]})},destroyOnClose:!0,onOk:this.HandlerSubmit,confirmLoading:this.props.Data.isLoading},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"name"},t("name",{initialValue:this.props.values.name})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u540d\u5b57"},t("name_cn",{initialValue:this.props.values.name_cn})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"description"},t("description",{initialValue:this.props.values.description})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u63cf\u8ff0"},t("description_cn",{initialValue:this.props.values.description_cn})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))}}]),t}(n.Component)),Yt=Object(be.b)((function(e){return{Data:e.ProductCategoryReducer}}),(function(e){return{UpdateAndFetchProductCategory:function(t,a,n){return e($t(t,a,n))}}}))(Kt),Qt=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){a.props.FetchProductCategory()},a.componentWillUnmount=function(){a.setState=function(e){}},a.state={ProductCategoryVisible:!1,propsToModal:{name:"",name_cn:"",description:"",description_cn:"",image:""}},a.hideProductCategoryModal=function(){a.setState({ProductCategoryVisible:!1})},a.openProductCategoryModal=function(e){a.setState({propsToModal:{name:e.name,name_cn:e.name_cn,description:e.description,description_cn:e.description_cn,id:e._id.$oid,image:e.image}},(function(){a.setState({ProductCategoryVisible:!0})}))},a.navigateTo=function(e){a.props.history.push(e)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(n.Fragment,null,i.a.createElement(De,{title:this.props.name},i.a.createElement(Ct.a,{style:{top:250},tip:"Loading...",spinning:this.props.Data.isLoading},i.a.createElement(Pe.a,{gutter:[0,20]},this.props.Data.data.map((function(t,a){var n="/dashboard/product/"+t._id.$oid;return i.a.createElement(Ie.a,{key:a.toString(),span:8},i.a.createElement(xt.a,{title:t.name,style:{width:300},extra:i.a.createElement("a",{onClick:function(){e.openProductCategoryModal(t)}},"Edit")},i.a.createElement("img",{onClick:function(){e.navigateTo(n)},style:{width:"100%",height:"150px",cursor:"pointer"},alt:"",src:"".concat(t.image)})))}))))),i.a.createElement(Yt,{visible:this.state.ProductCategoryVisible,hideModal:this.hideProductCategoryModal,values:this.state.propsToModal}))}}]),t}(n.Component),Jt=Object(be.b)((function(e){return{Data:e.ProductCategoryReducer}}),(function(e){return{FetchProductCategory:function(){return e(Wt())}}}))(Object(se.g)(Qt)),Xt=function(e){return i.a.createElement(_e.a,{title:"change password Confirmation",visible:e.visible,onOk:e.confirm,onCancel:e.hideModal,okText:"Confirm",cancelText:"Cancel"},i.a.createElement(h.a.Title,{level:3},"Are sure to change password and Re-login"))},Zt=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={confirmDirty:!1,newpassword:"",oldpassword:"",changeModalVisible:!1},a.openchangepasswordModal=function(){a.setState({changeModalVisible:!0})},a.hidechangepasswordModal=function(){a.setState({changeModalVisible:!1})},a.passwordchanged=function(){var e=window.localStorage.getItem("user_id"),t=new FormData;t.append("old_password",a.state.oldpassword),t.append("new_password",a.state.newpassword),w(t,e).then((function(e){console.log(e)})).then((function(){localStorage.removeItem("token"),localStorage.removeItem("name"),localStorage.removeItem("user_id"),window.location="/login"})).catch((function(e){alert(e.error_message)}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.validateToNextPassword=function(e,t,n){var i=a.props.form;a.setState({oldpassword:i.getFieldValue("old_password")}),t&&a.state.confirmDirty&&i.validateFields(["confirm"],{force:!0}),t&&t===i.getFieldValue("old_password")?n("The new password should be inconsistent with the old password!"):(a.setState({newpassword:t}),n()),n()},a.compareToFirstPassword=function(e,t,n){var i=a.props.form;t&&t!==i.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},a.submitpassword=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(e)return"";a.setState({changeModalVisible:!0})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(De,{title:this.props.name},i.a.createElement(g.a,null,i.a.createElement(g.a.Item,{label:"Old Password",hasFeedback:!0},e("old_password",{rules:[{required:!0,message:"Please input your Old Password!"}]})(i.a.createElement(f.a.Password,null))),i.a.createElement(g.a.Item,{label:"Password",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(i.a.createElement(f.a.Password,null))),i.a.createElement(g.a.Item,{label:"Confirm Password",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(i.a.createElement(f.a.Password,{onBlur:this.handleConfirmBlur}))),i.a.createElement(g.a.Item,null,i.a.createElement(E.a,{type:"primary",htmlType:"submit",onClick:this.submitpassword,style:{marginLeft:"45%"}},"submit")),i.a.createElement(Xt,{hideModal:this.hidechangepasswordModal,confirm:this.passwordchanged,visible:this.state.changeModalVisible})))}}]),t}(n.Component),ea=g.a.create({name:"change"})(Zt),ta=g.a.create({name:"product_add_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={isLoading:!1,imageFileList:[]},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;if(Object.keys(t).forEach((function(e){"image"!==e&&n.append(e,t[e])})),n.append("product_category_id",a.props.productCategoryId),0!==t.image.length)if(t.image[0].response.is_success){var i=t.image.map((function(e){return e.response.data}));n.append("image",i)}else n.append("image",[]);else n.append("image",[]);n.append("price","contact us"),n.append("price_cn","\u8054\u7cfb\u6211\u4eec"),a.props.AddProduct(n,(function(){a.props.form.resetFields(),a.setState({imageFileList:[]})}))}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{style:{top:0},width:1e3,visible:this.props.visible,title:"Add Product",okText:"Add",onCancel:function(){e.props.hideModal(),e.setState({imageFileList:[]})},onOk:this.HandlerSubmit,confirmLoading:this.props.isLoading,destroyOnClose:!0},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(Pe.a,{type:"flex",justify:"space-around"},i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"code"},t("code",{rules:[{required:!0,message:"Please enter the code!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"color"},t("color",{rules:[{required:!0,message:"Please enter the color!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"environment"},t("environment",{rules:[{required:!0,message:"Please enter the environment!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"finish"},t("finish",{rules:[{required:!0,message:"Please enter the finish!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"material"},t("material",{rules:[{required:!0,message:"Please enter the material!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"shape"},t("shape",{rules:[{required:!0,message:"Please enter the shape!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"size"},t("size",{rules:[{required:!0,message:"Please enter the size!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"style"},t("style",{rules:[{required:!0,message:"Please enter the style!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"type"},t("type",{rules:[{required:!0,message:"Please enter the type!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"unit"},t("unit",{rules:[{required:!0,message:"Please enter the unit!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u989c\u8272"},t("color_cn",{rules:[{required:!0,message:"Please enter the \u989c\u8272!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u9002\u7528\u573a\u666f"},t("environment_cn",{rules:[{required:!0,message:"Please enter the \u9002\u7528\u573a\u666f!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u6750\u6599\u9762"},t("finish_cn",{rules:[{required:!0,message:"Please enter the \u6750\u6599\u9762!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u6750\u6599"},t("material_cn",{rules:[{required:!0,message:"Please enter the \u6750\u6599!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u5f62\u72b6"},t("shape_cn",{rules:[{required:!0,message:"Please enter the \u5f62\u72b6!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u5927\u5c0f"},t("size_cn",{rules:[{required:!0,message:"Please enter the \u5927\u5c0f!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u98ce\u683c"},t("style_cn",{rules:[{required:!0,message:"Please enter the \u98ce\u683c!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u7c7b\u578b"},t("type_cn",{rules:[{required:!0,message:"Please enter the \u7c7b\u578b!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u5355\u4f4d"},t("unit_cn",{rules:[{required:!0,message:"Please enter the \u5355\u4f4d!"}]})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[],rules:[{required:!0,message:"Please upload the Image!"}]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},4!==this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))))}}]),t}(n.Component)),aa=g.a.create({name:"edit_product_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a.state={imageFileList:[]},a.onCancel=function(){a.props.hideModal()},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n=new FormData;if(Object.keys(t).forEach((function(e){console.log(e),"image"!==e&&n.append(e,t[e])})),n.append("product_category_id",a.props.productCategoryId),0!==t.image.length)if(t.image[0].response.is_success){var i=t.image.map((function(e){return e.response.data}));n.append("image",i)}else n.append("image",a.props.values.image);else n.append("image",a.props.values.image);n.append("price","contact us"),n.append("price_cn","\u8054\u7cfb\u6211\u4eec"),a.props.updateProduct(a.props.values.id,n,(function(){a.props.form.resetFields()})),a.setState({imageFileList:[]})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{visible:this.props.visible,title:"Edit ".concat(this.props.values.code," Information"),okText:"Update",width:1e3,style:{top:0},onCancel:function(){e.onCancel(),e.setState({imageFileList:[]})},onOk:this.HandlerSubmit,confirmLoading:this.props.isLoading,destroyOnClose:!0},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(Pe.a,{type:"flex",justify:"space-around"},i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"code"},t("code",{rules:[{required:!0,message:"Please enter the code!"}],initialValue:this.props.values.code})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"color"},t("color",{rules:[{required:!0,message:"Please enter the color!"}],initialValue:this.props.values.color})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"environment"},t("environment",{rules:[{required:!0,message:"Please enter the environment!"}],initialValue:this.props.values.environment})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"finish"},t("finish",{rules:[{required:!0,message:"Please enter the finish!"}],initialValue:this.props.values.finish})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"material"},t("material",{rules:[{required:!0,message:"Please enter the material!"}],initialValue:this.props.values.material})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"shape"},t("shape",{rules:[{required:!0,message:"Please enter the shape!"}],initialValue:this.props.values.shape})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"size"},t("size",{rules:[{required:!0,message:"Please enter the size!"}],initialValue:this.props.values.size})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"style"},t("style",{rules:[{required:!0,message:"Please enter the style!"}],initialValue:this.props.values.style})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"type"},t("type",{rules:[{required:!0,message:"Please enter the type!"}],initialValue:this.props.values.type})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"unit"},t("unit",{rules:[{required:!0,message:"Please enter the unit!"}],initialValue:this.props.values.unit})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u989c\u8272"},t("color_cn",{rules:[{required:!0,message:"Please enter the \u989c\u8272!"}],initialValue:this.props.values.color_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u9002\u7528\u573a\u666f"},t("environment_cn",{rules:[{required:!0,message:"Please enter the \u9002\u7528\u573a\u666f!"}],initialValue:this.props.values.environment_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u6750\u6599\u9762"},t("finish_cn",{rules:[{required:!0,message:"Please enter the \u6750\u6599\u9762!"}],initialValue:this.props.values.finish_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u6750\u6599"},t("material_cn",{rules:[{required:!0,message:"Please enter the \u6750\u6599!"}],initialValue:this.props.values.material_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u5f62\u72b6"},t("shape_cn",{rules:[{required:!0,message:"Please enter the \u5f62\u72b6!"}],initialValue:this.props.values.shape_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u5927\u5c0f"},t("size_cn",{rules:[{required:!0,message:"Please enter the \u5927\u5c0f!"}],initialValue:this.props.values.size_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u98ce\u683c"},t("style_cn",{rules:[{required:!0,message:"Please enter the \u98ce\u683c!"}],initialValue:this.props.values.style_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u7c7b\u578b"},t("type_cn",{rules:[{required:!0,message:"Please enter the \u7c7b\u578b!"}],initialValue:this.props.values.type_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"\u5355\u4f4d"},t("unit_cn",{rules:[{required:!0,message:"Please enter the \u5355\u4f4d!"}],initialValue:this.props.values.unit_cn})(i.a.createElement(f.a,null)))),i.a.createElement(Ie.a,{span:9},i.a.createElement(g.a.Item,{label:"image"},t("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},4!==this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null)))))))}}]),t}(n.Component)),na=function(e){return i.a.createElement(_e.a,{title:"Image Preview",visible:e.visible,onCancel:e.hideModal,onOk:e.hideModal},e.image?e.image.map((function(e){return i.a.createElement("a",{href:e},i.a.createElement("img",{style:{width:300,height:300},src:e,alt:""}))})):null)},ia=f.a.Search,la=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={title:"",isLoading:!1,data:[],dataShown:[],searchValue:"",AddProductModalVisible:!1,EditProductModalVisible:!1,DeleteProductModalVisible:!1,ProductPreviewModalVisible:!1,SelectImage:[],productDelete:{code:"",id:""},passToModal:{id:"",code:"",image:"",color:"",environment:"",finish:"",material:"",price:"",shape:"",size:"",style:"",type:"",unit:"",color_cn:"",environment_cn:"",finish_cn:"",material_cn:"",price_cn:"",shape_cn:"",size_cn:"",style_cn:"",type_cn:"",unit_cn:""}},a.hideProductAddModal=function(){a.setState({AddProductModalVisible:!1})},a.openProductAddModal=function(){a.setState({AddProductModalVisible:!0})},a.UpdateProductHandler=function(e,t,n){a.setState({isLoading:!0}),U(e,t).then((function(e){a.setState({isLoading:!1},(function(){a.setState({data:e.data,dataShown:e.data,EditProductModalVisible:!1}),n()}))})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.AddProductHandler=function(e,t){a.setState({isLoading:!0}),q(e).then((function(e){a.setState({isLoading:!1},(function(){a.setState({data:e.data,dataShown:e.data,AddProductModalVisible:!1}),t()}))})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.hideProductEditModal=function(){a.setState({EditProductModalVisible:!1})},a.openProductEditModal=function(e){a.setState({passToModal:{id:e._id.$oid,code:e.code,image:e.image,color:e.color,environment:e.environment,finish:e.finish,material:e.material,price:e.price,shape:e.shape,size:e.size,style:e.style,type:e.type,unit:e.unit,color_cn:e.color_cn,environment_cn:e.environment_cn,finish_cn:e.finish_cn,material_cn:e.material_cn,price_cn:e.price_cn,shape_cn:e.shape_cn,size_cn:e.size_cn,style_cn:e.style_cn,type_cn:e.type_cn,unit_cn:e.unit_cn},EditProductModalVisible:!0})},a.hideProductPreviewModal=function(){a.setState({ProductPreviewModalVisible:!1})},a.openProductPreviewModal=function(e){a.setState({SelectImage:e},(function(){a.setState({ProductPreviewModalVisible:!0})}))},a.componentWillUnmount=function(){a.setState=function(e){}},a.SearchOnChangeHandler=function(e){var t=e.target.value,n=a.state.data.filter((function(e){return e.code.toLowerCase().includes(t.toLowerCase())}));a.setState({dataShown:n,searchValue:t})},a.componentDidMount=function(){a.setState({isLoading:!0});var e=a.props.match.params.productCategoryId;x(e).then((function(t){a.setState({title:t.data.name},(function(){N(e).then((function(e){a.setState({isLoading:!1},(function(){a.setState({data:e.data,dataShown:e.data})}))})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))}))})).catch((function(e){a.props.history.push("/dashboard/productcategory")}))},a.hideDeleteProductModal=function(){a.setState({DeleteProductModalVisible:!1})},a.OpenDeleteProductModal=function(e){a.setState({DeleteProductModalVisible:!0,productDelete:{code:e.code,id:e._id.$oid}})},a.ConfirmDeleteHandler=function(){a.setState({isLoading:!0}),G(a.state.productDelete.id).then((function(e){a.setState({data:e.data,dataShown:e.data,isLoading:!1,DeleteProductModalVisible:!1})})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(n.Fragment,null,i.a.createElement(De,{title:this.state.title},i.a.createElement(Ct.a,{style:{top:250},tip:"Loading...",spinning:this.state.isLoading},i.a.createElement(Pe.a,{style:{marginBottom:20}},i.a.createElement(Ie.a,{span:8},i.a.createElement(E.a,{onClick:function(){e.props.history.push("/dashboard/productcategory")},type:"primary"},i.a.createElement(b.a,{type:"left"}),"Go back")),i.a.createElement("div",{style:{float:"right"}},i.a.createElement(ia,{placeholder:"Search By Code or Name...",onChange:this.SearchOnChangeHandler,style:{width:300},value:this.state.searchValue}),i.a.createElement(E.a,{onClick:this.openProductAddModal,type:"primary"},"Add Product"))),i.a.createElement(Pe.a,{gutter:[0,20]},this.state.dataShown.map((function(t,a){return i.a.createElement(Ie.a,{key:a.toString(),span:8},i.a.createElement(xt.a,{title:t.code,style:{width:300},extra:i.a.createElement(n.Fragment,null,i.a.createElement("a",{style:{marginRight:10},onClick:function(){e.OpenDeleteProductModal(t)}},"Delete"),i.a.createElement("a",{onClick:function(){e.openProductEditModal(t)}},"Edit"))},i.a.createElement("a",{onClick:function(){e.openProductPreviewModal(t.image)}},i.a.createElement("img",{style:{width:"100%",height:"150px"},alt:"",src:"".concat(t.image[0])}))))}))))),i.a.createElement(ta,{visible:this.state.AddProductModalVisible,productCategoryId:this.props.match.params.productCategoryId,isLoading:this.state.isLoading,hideModal:this.hideProductAddModal,AddProduct:this.AddProductHandler}),i.a.createElement(aa,{visible:this.state.EditProductModalVisible,hideModal:this.hideProductEditModal,isLoading:this.state.isLoading,values:this.state.passToModal,productCategoryId:this.props.match.params.productCategoryId,updateProduct:this.UpdateProductHandler}),i.a.createElement(Dt,{title:"Delete Confirmation",visible:this.state.DeleteProductModalVisible,confirm:this.ConfirmDeleteHandler,hideModal:this.hideDeleteProductModal,isLoading:this.state.isLoading,text:"Are sure to delete ".concat(this.state.productDelete.code)}),i.a.createElement(na,{visible:this.state.ProductPreviewModalVisible,hideModal:this.hideProductPreviewModal,image:this.state.SelectImage}))}}]),t}(n.Component),oa=Object(se.g)(la),ra=a(77),sa=a.n(ra),ca=a(78),da=a.n(ca),ua=function e(t){var a=this;Object(r.a)(this,e),this.upload=function(){return a.loader.file.then((function(e){return new Promise((function(t,a){var n=new FileReader;n.onloadend=function(){t({default:n.result})},n.readAsDataURL(e)}))}))},this.loader=t},ma=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={content:"",content_cn:"",isLoading:!1},a.EditorOnChange=function(e,t){var n=t.getData();a.setState({content:n})},a.EditorCNOnchange=function(e,t){var n=t.getData();a.setState({content_cn:n})},a.ConfirmHandler=function(){var e=a.state,t=e.content,n=e.content_cn;a.props.ContentConfirmClick({content:t,content_cn:n})},a.ModalConfirmHandler=function(){var e=a.props.NewsData,t=e.newsTitle,n=e.newsContent,i=Object(Ze.a)({},t,{},n),l=new FormData;Object.keys(i).forEach((function(e){l.append(e,i[e])})),a.setState({isLoading:!0}),W(l).then((function(e){a.setState({isLoading:!1},(function(){a.props.FinishPublish()})),console.log(e)})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h3",null,"Content"),i.a.createElement(sa.a,{editor:da.a,onInit:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new ua(e)}},onChange:function(t,a){return e.EditorOnChange(t,a)},config:{toolbar:["heading","|","align","bold","italic","|","link","imageUpload","|","bulletedList","numberedList","blockQuote","|","undo","redo"]}}),i.a.createElement("h3",{style:{paddingTop:30}},"\u5185\u5bb9"),i.a.createElement(sa.a,{editor:da.a,onInit:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new ua(e)}},onChange:function(t,a){return e.EditorCNOnchange(t,a)},config:{toolbar:["heading","|","align","bold","italic","|","link","imageUpload","|","bulletedList","numberedList","blockQuote","|","undo","redo"]}}),i.a.createElement(E.a,{onClick:this.props.ContentStepBackClick,style:{marginTop:15,marginRight:15},type:"primary"},"Back"),i.a.createElement(E.a,{onClick:this.ConfirmHandler,style:{marginTop:15},type:"primary"},"Publish"),i.a.createElement(Dt,{title:"Publish Confirmation",visible:this.props.NewsData.finalConfirmModalVisible,confirm:this.ModalConfirmHandler,hideModal:this.props.CloseFinalConfirmModal,isLoading:this.state.isLoading,text:"Are you sure to publish this news?"}))}}]),t}(n.Component),pa=Object(be.b)((function(e){return{NewsData:e.NewsReducer}}),(function(e){return{ContentStepBackClick:function(){e({type:"ContentStepBackClick"})},ContentConfirmClick:function(t){e(function(e){return{type:"ContentConfirmClick",payload:e}}(t))},CloseFinalConfirmModal:function(){e({type:"CloseFinalConfirmModal"})},FinishPublish:function(){e({type:"FinishPublish"})}}}))(ma),ha=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={imageFileList:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n={title:t.title,title_cn:t.title_cn,image:""};0!==t.image.length&&t.image[0].response.is_success&&(n.image=t.image[0].response.data),a.props.TitleStepNextClick(n)}}))},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(g.a,{labelCol:{span:5},wrapperCol:{span:12},onSubmit:this.handleSubmit},i.a.createElement(g.a.Item,{label:"Title"},e("title",{rules:[{required:!0,message:"Please input your title!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u6807\u9898"},e("title_cn",{rules:[{required:!0,message:"Please input your \u6807\u9898!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"Title Image"},e("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[],rules:[{required:!0,message:"Please upload image!"}]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null))),i.a.createElement(g.a.Item,{wrapperCol:{span:12,offset:5}},i.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Next Step")))}}]),t}(n.Component),ga=g.a.create({name:"news_title_form"})(ha),fa=Object(be.b)((function(e){return{NewsData:e.NewsReducer}}),(function(e){return{TitleStepNextClick:function(t){e(function(e){return{type:"TitleStepNextClick",payload:e}}(t))}}}))(ga),ba=a(682),Ea=a(684),ya=Object(be.b)((function(e){return{NewsData:e.NewsReducer}}),(function(e){return{ResetAll:function(){e({type:"ResetAll"})}}}))((function(e){return i.a.createElement(Ea.a,{icon:i.a.createElement(b.a,{type:"smile",theme:"twoTone"}),title:"Great, we have done all the operations!",extra:i.a.createElement(E.a,{onClick:function(){window.location="/dashboard/publish"},type:"primary"},"Keep adding News")})})),va=ba.a.Step,Sa=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={pos:0},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(De,{title:this.props.name},i.a.createElement("div",{style:{paddingBottom:50}},i.a.createElement(ba.a,{progressDot:!0,current:this.state.pos},i.a.createElement(va,{title:"First Step",description:"news title and image"}),i.a.createElement(va,{title:"Second Step",description:"content of the news"}),i.a.createElement(va,{title:"Finished",description:"Finished"}))),i.a.createElement("div",{style:{display:0===this.state.pos?"block":"none"}},i.a.createElement(fa,null)),i.a.createElement("div",{style:{display:1===this.state.pos?"block":"none"}},i.a.createElement(pa,null)),i.a.createElement("div",{style:{display:2===this.state.pos?"block":"none"}},i.a.createElement(ya,null)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.NewsData.stepPosition!==t.pos?Object(Ze.a)({},t,{pos:e.NewsData.StepPosition}):null}}]),t}(n.Component),Ca=Object(be.b)((function(e){return{NewsData:e.NewsReducer}}))(Sa),Oa=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={isLoading:!1,data:[],DeleteModalVisible:!1,DeleteNewsTitleId:""},a.componentDidMount=function(){a.setState({isLoading:!0}),$().then((function(e){a.setState({isLoading:!1,data:e.data})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.DeleteHandler=function(){a.setState({isLoading:!0}),K(a.state.DeleteNewsTitleId).then((function(e){a.setState({isLoading:!1,data:e.data,DeleteModalVisible:!1})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.DeleteModalOpen=function(e){a.setState({DeleteNewsTitleId:e,DeleteModalVisible:!0})},a.componentWillUnmount=function(){a.setState=function(e){}},a.EditClickHandler=function(e){var t="/dashboard/newsedit/"+e;a.props.history.push(t)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(De,{title:this.props.name},i.a.createElement(Ct.a,{style:{top:250},tip:"Loading...",spinning:this.state.isLoading},this.state.data.map((function(t,a){return i.a.createElement(Pe.a,{key:a.toString(),style:{marginBottom:30}},i.a.createElement(Ie.a,{span:2,style:{marginRight:20}},i.a.createElement("a",{onClick:function(){e.EditClickHandler(t._id.$oid)}},"Edit"),i.a.createElement("br",null),i.a.createElement("a",{onClick:function(){e.DeleteModalOpen(t._id.$oid)}},"Delete")),i.a.createElement(Ie.a,{style:{marginRight:20},span:4},i.a.createElement("img",{style:{width:"100%",height:"150px"},src:t.image,alt:""})),i.a.createElement(Ie.a,{span:14},i.a.createElement("label",null,i.a.createElement("strong",null,"Title")),i.a.createElement("p",null,t.title),i.a.createElement("label",null,i.a.createElement("strong",null,"\u6807\u9898")),i.a.createElement("p",null,t.title_cn)))}))),i.a.createElement(Dt,{title:"Delete Confirmation",visible:this.state.DeleteModalVisible,confirm:this.DeleteHandler,hideModal:function(){e.setState({DeleteModalVisible:!1})},isLoading:this.state.isLoading,text:"Are you sure to Delete?"}))}}]),t}(n.Component),Ma=Object(se.g)(Oa),_a=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={imageFileList:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n={title:t.title,title_cn:t.title_cn,image:a.props.image};0!==t.image.length&&t.image[0].response.is_success&&(n.image=t.image[0].response.data),a.props.submit(n)}}))},a.imageFile=function(e){return a.setState({imageFileList:e.fileList}),Array.isArray(e)?e:e&&e.fileList},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(g.a,{labelCol:{span:5},wrapperCol:{span:12},onSubmit:this.handleSubmit},i.a.createElement(g.a.Item,{label:"Title"},e("title",{rules:[{required:!0,message:"Please input your title!"}],initialValue:this.props.title})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"\u6807\u9898"},e("title_cn",{rules:[{required:!0,message:"Please input your \u6807\u9898!"}],initialValue:this.props.title_cn})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"Title Image"},e("image",{valuePropName:"image",getValueFromEvent:this.imageFile,initialValue:[]})(i.a.createElement(wt.a,{action:V,name:"image",listType:"picture"},0===this.state.imageFileList.length?i.a.createElement(E.a,null,i.a.createElement(b.a,{type:"upload"})," Click to upload"):null))),i.a.createElement(g.a.Item,{wrapperCol:{span:12,offset:5}},i.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Next Step")))}}]),t}(n.Component),wa=g.a.create({name:"news_edit_form"})(_a),La=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={modalVisible:!1,content:"",content_cn:""},a.EditorOnChange=function(e,t){var n=t.getData();a.setState({content:n})},a.EditorCNOnchange=function(e,t){var n=t.getData();a.setState({content_cn:n})},a.ConfirmHandler=function(){a.setState({modalVisible:!0},(function(){a.props.ConfirmContent({content:a.state.content,content_cn:a.state.content_cn})}))},a.ModalConfirmHandler=function(){a.props.EditConfirm((function(){a.setState({modalVisible:!1},(function(){}))}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h3",null,"Content"),i.a.createElement(sa.a,{data:this.props.content,editor:da.a,onInit:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new ua(e)}},onChange:function(t,a){return e.EditorOnChange(t,a)},config:{toolbar:["heading","|","align","bold","italic","|","link","imageUpload","|","bulletedList","numberedList","blockQuote","|","undo","redo"]}}),i.a.createElement("h3",{style:{paddingTop:30}},"\u5185\u5bb9"),i.a.createElement(sa.a,{data:this.props.content_cn,editor:da.a,onInit:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new ua(e)}},onChange:function(t,a){return e.EditorCNOnchange(t,a)},config:{toolbar:["heading","|","align","bold","italic","|","link","imageUpload","|","bulletedList","numberedList","blockQuote","|","undo","redo"]}}),i.a.createElement(E.a,{onClick:this.props.StepBack,style:{marginTop:15,marginRight:15},type:"primary"},"Back"),i.a.createElement(E.a,{onClick:this.ConfirmHandler,style:{marginTop:15},type:"primary"},"Edit"),i.a.createElement(Dt,{title:"Edit Confirmation",visible:this.state.modalVisible,confirm:this.ModalConfirmHandler,hideModal:function(){e.setState({modalVisible:!1})},isLoading:this.props.isLoading,text:"Are you sure to Edit this news?"}))}}]),t}(n.Component),ka=Object(be.b)((function(e){return{}}),(function(e){return{ConfirmContent:function(t){e(function(e){return{type:"ConfirmContent",payload:e}}(t))},ResetAll:function(){e({type:"ResetAll"})}}}))(La),ja=ba.a.Step,Da=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={isLoading:!1,data:{title:"",title_cn:"",news_title_id:"",content_cn:"",content:"",news_content_id:"",image:""},pos:0},a.componentDidMount=function(){var e=a.props.match.params.newsTitleId;a.setState({isLoading:!0}),Y(e).then((function(e){a.setState({data:{title:e.data.news_title.title,title_cn:e.data.news_title.title_cn,news_title_id:e.data.news_title_id,content_cn:e.data.content_cn,content:e.data.content,news_content_id:e.data._id,image:e.data.news_title.image},isLoading:!1})})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.componentWillUnmount=function(){a.props.ResetAll(),a.setState=function(e){}},a.EditConfirm=function(e){var t=new FormData;Object.keys(a.state.data).forEach((function(e){t.append(e,a.state.data[e])})),a.setState({isLoading:!0}),Q(t).then((function(t){a.setState({isLoading:!1,pos:2}),e()})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a.NewsEditFormSubmit=function(e){a.setState({data:Object(Ze.a)({},a.state.data,{title:e.title,title_cn:e.title_cn,image:e.image}),pos:1})},a.StepBack=function(){a.setState({pos:0})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){this.setState({data:Object(Ze.a)({},this.state.data,{content:e.ContentData.content,content_cn:e.ContentData.content_cn})})}},{key:"render",value:function(){var e=this;return i.a.createElement(De,{title:this.props.name},i.a.createElement(Ct.a,{style:{top:250},tip:"Loading...",spinning:this.state.isLoading},i.a.createElement(E.a,{onClick:function(){e.props.history.push("/dashboard/news")},type:"primary"},i.a.createElement(b.a,{type:"left"}),"Go back"),i.a.createElement("div",{style:{marginTop:50}},i.a.createElement(ba.a,{progressDot:!0,current:this.state.pos},i.a.createElement(ja,{title:"First Step",description:"news title and image"}),i.a.createElement(ja,{title:"Second Step",description:"content of the news"}),i.a.createElement(ja,{title:"Finished",description:"Finished"}))),i.a.createElement("div",{style:{display:0===this.state.pos?"block":"none"}},i.a.createElement(wa,{submit:this.NewsEditFormSubmit,image:this.state.data.image,title:this.state.data.title,title_cn:this.state.data.title_cn})),i.a.createElement("div",{style:{display:1===this.state.pos?"block":"none"}},i.a.createElement(ka,{content:this.state.data.content,content_cn:this.state.data.content_cn,EditConfirm:this.EditConfirm,StepBack:this.StepBack,isLoading:this.state.isLoading})),i.a.createElement("div",{style:{display:2===this.state.pos?"block":"none"}},i.a.createElement(Ea.a,{icon:i.a.createElement(b.a,{type:"smile",theme:"twoTone"}),title:"Great, we have done all the operations!",extra:i.a.createElement(E.a,{onClick:function(){window.location="/dashboard/news"},type:"primary"},"See All News")}))))}}]),t}(n.Component),Pa=Object(be.b)((function(e){return{ContentData:e.NewsEditReducer}}),(function(e){return{ResetAll:function(){return e({type:"ResetAll"})}}}))(Da),Ia=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={content:"",subject:"",isLoading:!1,confirmModalVisible:!1,test_email:""},a.EditorOnChange=function(e,t){var n=t.getData();a.setState({content:n})},a.SubjectOnChange=function(e){a.setState({subject:e.target.value})},a.SendToAllButtonClickHandler=function(){a.setState({confirmModalVisible:!0})},a.ConfirmHandler=function(){var e=new FormData;e.append("subject",a.state.subject),e.append("content",a.state.content),a.setState({isLoading:!0}),te(e).then((function(e){a.setState({isLoading:!1},(function(){alert(e.data),window.location.reload()}))})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))},a.TemplateTestSend=function(){if(!(""===a.state.test_email||a.state.test_email.length<=5)){var e=new FormData;e.append("subject",a.state.subject),e.append("content",a.state.content),e.append("target_email",a.state.test_email),a.setState({isLoading:!0}),ae(e).then((function(e){a.setState({isLoading:!1},(function(){alert(e.data)}))})).catch((function(e){console.log(e),a.setState({isLoading:!1})}))}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(De,{title:this.props.name},i.a.createElement("div",{style:{paddingBottom:30}},i.a.createElement("h3",null,"Email Subject"),i.a.createElement(f.a,{onChange:this.SubjectOnChange,placeholder:"Enter the email subject",value:this.state.subject})),i.a.createElement("div",null,i.a.createElement("h3",null,"Email Content"),i.a.createElement(sa.a,{editor:da.a,onInit:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new ua(e)}},onChange:function(t,a){return e.EditorOnChange(t,a)},config:{toolbar:["heading","|","align","bold","italic","|","link","|","bulletedList","numberedList","blockQuote","|","undo","redo"]}})),i.a.createElement("div",{style:{paddingTop:30}},i.a.createElement(f.a,{onChange:function(t){e.setState({test_email:t.target.value})},value:this.state.test_email,placeholder:"Enter the email recipient to test template ..."}),i.a.createElement(E.a,{onClick:this.TemplateTestSend,loading:this.state.isLoading,style:{marginTop:10},type:"primary"},"Send")),i.a.createElement("div",{style:{paddingTop:30}},i.a.createElement(E.a,{onClick:this.SendToAllButtonClickHandler,disabled:this.state.isLoading,type:"primary"},"Send To All"))),i.a.createElement(Dt,{title:"Email Sending Confirmation",visible:this.state.confirmModalVisible,confirm:this.ConfirmHandler,hideModal:function(){e.setState({confirmModalVisible:!1})},isLoading:this.state.isLoading,text:"Are you sure to send this email to all the local client?"}))}}]),t}(n.Component),Aa=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(n.Fragment,null,i.a.createElement(De,{title:this.props.name}))}}]),t}(n.Component),Fa=Object(se.g)((function(e){var t=Object(n.useState)(""),a=Object(nt.a)(t,2),l=a[0],o=a[1],r=Object(n.useState)(!1),s=Object(nt.a)(r,2),c=s[0],d=s[1],u=Object(n.useState)(!1),m=Object(nt.a)(u,2),p=m[0],h=(m[1],Object(n.useState)(0)),g=Object(nt.a)(h,2),b=g[0],y=g[1];return i.a.createElement(n.Fragment,null,i.a.createElement(Ot.a,{title:e.title,bordered:!0,column:1},i.a.createElement(Ot.a.Item,{label:"name"},e.MemberData.name),i.a.createElement(Ot.a.Item,{label:"email"},e.MemberData.email),i.a.createElement(Ot.a.Item,{label:"address"},e.MemberData.address),i.a.createElement(Ot.a.Item,{label:"phone"},e.MemberData.phone),i.a.createElement(Ot.a.Item,{label:"company"},e.MemberData.company),i.a.createElement(Ot.a.Item,{label:"End Date"},qe()(e.MemberData.end_date).format("L")),i.a.createElement(Ot.a.Item,{label:"point"},e.MemberData.point),i.a.createElement(Ot.a.Item,{label:"Transaction"},i.a.createElement("a",{onClick:function(){e.history.push("/dashboard/membertransaction/"+e.MemberData.key)}},"View"))),i.a.createElement(E.a,{onClick:function(){o("Use Point")},style:{marginTop:15,marginBottom:10},type:"primary"},"Use points"),i.a.createElement(E.a,{onClick:function(){o("Add Point")},style:{marginTop:15,marginLeft:10,marginBottom:10},type:"primary"},"Add points"),i.a.createElement("div",null,l?i.a.createElement("span",null,l," : ",i.a.createElement(f.a.Search,{type:"number",enterButton:"Confirm",onChange:function(e){y(e.target.value)},onSearch:function(){d(!0)}})," "):null),i.a.createElement(Dt,{title:"".concat(l," Confirmation"),visible:c,confirm:function(){var t,a;"Add Point"===l&&(t=e.MemberData.key,a=b,S({method:"POST",url:O.AddPointToMember(t,a),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})).then((function(t){alert("success"),d(!1),e.OnCloseHandler()})).catch((function(e){console.log(e)})),"Use Point"===l&&function(e,t){return S({method:"POST",url:O.UsePointToMember(e,t),headers:{Authorization:" Basic "+M(localStorage.getItem("token"))}})}(e.MemberData.key,b).then((function(t){alert("success"),d(!1),e.OnCloseHandler()})).catch((function(e){d(!1),alert(e.error_message)}))},hideModal:function(){d(!1)},isLoading:p,text:"Are you sure ".concat(l,"?")}))})),Ta=g.a.create({name:"member_search_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={MemberData:null,isLoading:!1},a.OnSearchHandler=function(e){a.setState({isLoading:!0}),le(e).then((function(e){var t=e.data;a.setState({MemberData:{key:t._id.$oid,name:t.name,phone:t.phone,email:t.email,address:t.address,company:t.company,point:t.point,end_date:qe()(t.end_date.$date).format("L")},isLoading:!1})})).catch((function(e){a.setState({isLoading:!1}),console.log(e)}))},a.OnCloseHandler=function(){a.props.OnSearchModalClose((function(){a.setState({MemberData:null,isLoading:!1})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(_e.a,{title:"Search Member",style:{top:30},visible:this.props.visible,onCancel:this.OnCloseHandler,footer:null,maskClosable:!1,destroyOnClose:!0},i.a.createElement(f.a.Search,{placeholder:"Enter your phone number",enterButton:"Search",size:"large",onSearch:this.OnSearchHandler}),i.a.createElement("div",{style:{marginTop:20}},this.state.MemberData?i.a.createElement("div",null,i.a.createElement(Fa,{title:"Member Info",MemberData:this.state.MemberData,OnCloseHandler:this.OnCloseHandler})):this.state.isLoading?i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(Ct.a,{indicator:i.a.createElement(b.a,{type:"loading",style:{fontSize:24},spin:!0})})):i.a.createElement("h1",{style:{textAlign:"center"}},"No Result")))}}]),t}(n.Component)),Va=g.a.create({name:"add_member_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={imageFileList:[]},a.HandlerSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n=new FormData;Object.keys(t).forEach((function(e){n.append(e,t[e])})),a.props.onOk(n)}}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(_e.a,{style:{top:10},visible:this.props.visible,title:"Add Member",okText:"Add",onCancel:function(){e.props.close((function(){}))},onOk:this.HandlerSubmit,confirmLoading:this.props.loading,destroyOnClose:!0},i.a.createElement(g.a,{layout:"vertical"},i.a.createElement(g.a.Item,{label:"Name"},t("name",{rules:[{required:!0,message:"Please enter the name!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"Phone Number"},t("phone",{rules:[{required:!0,message:"Please enter the phone number!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"Address"},t("address",{})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"Email"},t("email",{rules:[{required:!0,message:"Please enter the email!"}]})(i.a.createElement(f.a,null))),i.a.createElement(g.a.Item,{label:"Company"},t("company",{})(i.a.createElement(f.a,null)))))}}]),t}(n.Component)),xa=g.a.create({name:"member_action_modal"})(function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={isLoading:!1},a.OnCloseHandler=function(){a.props.CloseMemberActionModal()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(_e.a,{title:"View Member",style:{top:30},visible:this.props.visible,onCancel:this.OnCloseHandler,footer:null,maskClosable:!1,destroyOnClose:!0},i.a.createElement("div",{style:{marginTop:20}},i.a.createElement("div",null,i.a.createElement(Fa,{title:"Member Info",MemberData:this.props.MemberData,OnCloseHandler:this.OnCloseHandler}))))}}]),t}(n.Component)),Ba=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).columns=[{title:"Name",dataIndex:"name"},{title:"Phone",dataIndex:"phone"},{title:"Email",dataIndex:"email"},{title:"Point",dataIndex:"point"},{title:"End Date",dataIndex:"end_date"},{title:"Info",key:"info",render:function(e,t){return i.a.createElement("a",{onClick:function(){a.setState({ActionModalMemberData:e},(function(){a.OpenMemberActionModal()}))}},"View")}}],a.componentDidMount=function(){a.GetData()},a.GetData=function(){a.setState({loading:!0}),ie(a.state.current_page_num).then((function(e){a.setState({data:e.data.data.map((function(e){return{key:e._id.$oid,name:e.name,phone:e.phone,email:e.email,address:e.address,company:e.company,point:e.point,end_date:qe()(e.end_date.$date).format("L")}})),total:e.data.total,loading:!1})})).catch((function(e){console.log(e),a.setState({loading:!1})}))},a.componentWillUnmount=function(){a.setState=function(e){}},a.state={selectedRowKeys:[],loading:!1,current_page_num:1,data:[],total:1,searchModalVisible:!1,AddMemberModalVisible:!1,MemberActionModalVisible:!1,ActionModalMemberData:null},a.pageChange=function(e,t){a.setState({loading:!0}),ie(e).then((function(t){a.setState({loading:!1},(function(){a.setState({data:t.data.data.map((function(e){return{key:e._id.$oid,name:e.name,phone:e.phone,address:e.address,company:e.company,email:e.email,point:e.point,end_date:qe()(e.end_date.$date).format("L")}})),total:t.data.total,current_page_num:e,loading:!1})}))})).catch((function(e){a.setState({loading:!1}),alert("Server Error")}))},a.SearchModalClose=function(e){a.setState({searchModalVisible:!1},(function(){e(),a.GetData()}))},a.SearchModalOpen=function(){a.setState({searchModalVisible:!0})},a.AddMemberModalClose=function(e){a.setState({AddMemberModalVisible:!1},(function(){e()}))},a.AddMemberModalOpen=function(){a.setState({AddMemberModalVisible:!0})},a.AddMemberHandler=function(e){a.setState({loading:!0}),oe(e).then((function(e){a.setState({loading:!1,AddMemberModalVisible:!1},(function(){a.GetData()}))})).catch((function(e){a.setState({loading:!1}),alert(e.error_message)}))},a.CloseMemberActionModal=function(){a.setState({MemberActionModalVisible:!1},(function(){a.GetData()}))},a.OpenMemberActionModal=function(){a.setState({MemberActionModalVisible:!0})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){this.state.loading;return i.a.createElement("div",null,i.a.createElement("div",{style:{marginBottom:16,float:"left"}},i.a.createElement(E.a,{disabled:this.state.loading,onClick:this.AddMemberModalOpen,type:"primary"},"Add Member")),i.a.createElement("div",{style:{marginBottom:16,float:"right"}},i.a.createElement(E.a,{disabled:this.state.loading,type:"primary",onClick:this.SearchModalOpen},"Search")),i.a.createElement("div",{style:{clear:"both"}}),i.a.createElement(at.a,{columns:this.columns,dataSource:this.state.data,loading:this.state.loading,pagination:{defaultPageSize:10,onChange:this.pageChange,total:this.state.total,current:this.state.current_page_num}}),i.a.createElement(Ta,{visible:this.state.searchModalVisible,OnSearchModalClose:this.SearchModalClose}),i.a.createElement(Va,{visible:this.state.AddMemberModalVisible,close:this.AddMemberModalClose,onOk:this.AddMemberHandler,loading:this.state.loading}),i.a.createElement(xa,{visible:this.state.MemberActionModalVisible,CloseMemberActionModal:this.CloseMemberActionModal,MemberData:this.state.ActionModalMemberData}))}}]),t}(n.Component),Ha=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(n.Fragment,null,i.a.createElement(De,{title:this.props.name},i.a.createElement(Ba,null)))}}]),t}(n.Component),Na="/dashboard",qa=[{name:"Home",component:Xe,path:Na+"/home",pos:0},{name:"Lottery Management",component:mt,path:Na+"/lotterymanagement",pos:1},{name:"Web Client",component:ht,path:Na+"/webclient",pos:2},{name:"Local Client",component:St,path:Na+"/localclient",pos:3},{name:"Staff Information",component:It,path:Na+"/staffinfo",pos:4},{name:"Company Description",component:Vt,path:Na+"/companydescription",pos:5},{name:"Brand",component:Gt,path:Na+"/brand",pos:6},{name:"Product Category",component:Jt,path:Na+"/productcategory",pos:7},{name:"Change Password",component:ea,path:Na+"/changepassword",pos:null},{name:"Product",component:oa,path:Na+"/product/:productCategoryId",pos:null},{name:"Publish News",component:Ca,path:Na+"/publish",pos:8},{name:"News Information",component:Ma,path:Na+"/news",pos:9},{name:"News Edit",component:Pa,path:Na+"/newsedit/:newsTitleId",pos:null},{name:"Member Transaction",component:function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).columns=[{title:"Use or Add",dataIndex:"add_or_use",key:"add_or_use"},{title:"Point",dataIndex:"point",key:"point"},{title:"Date time",dataIndex:"date_time",key:"date_time"}],a.GoBackClick=function(){a.props.history.goBack()},a.state={data:[],loading:!1},a.componentDidMount=function(){a.setState({loading:!0}),re(a.props.match.params.memberId).then((function(e){a.setState({loading:!1,data:e.data.map((function(e){return{key:e._id.$oid,point:e.point,add_or_use:e.add_or_use?"Add":"Use",date_time:qe()(e.date_time.$date).format("lll")}}))})})).catch((function(e){a.setState({loading:!1}),console.log(e)}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(n.Fragment,null,i.a.createElement(De,{title:this.props.name},i.a.createElement(Pe.a,{style:{marginBottom:20}},i.a.createElement(Ie.a,{span:8},i.a.createElement(E.a,{onClick:this.GoBackClick,type:"primary"},i.a.createElement(b.a,{type:"left"}),"Go back")),i.a.createElement(Ie.a,{style:{marginTop:10},span:24},i.a.createElement(at.a,{loading:this.state.loading,columns:this.columns,dataSource:this.state.data})))))}}]),t}(n.Component),path:Na+"/membertransaction/:memberId",pos:null},{name:"Email",component:Ia,path:Na+"/email",pos:10},{name:"Tracking",component:Aa,path:Na+"/tracking",pos:11},{name:"Member",component:Ha,path:Na+"/member",pos:12}],Ua=[{name:"Home",component:Xe,icon:"home",path:Na+"/home",pos:0},{name:"Lottery Management",component:mt,icon:"smile",path:Na+"/lotterymanagement",pos:1},{name:"Web Management",icon:"global",key:"sub1",items:[{name:"Web Client",component:ht,icon:"contacts",path:Na+"/webclient",pos:2},{name:"Staff Info",component:It,icon:"team",path:Na+"/staffinfo",pos:4},{name:"About",component:Vt,icon:"info",path:Na+"/companydescription",pos:5},{name:"Brand",component:Gt,icon:"folder",path:Na+"/brand",pos:6},{name:"Product",component:Jt,icon:"shop",path:Na+"/productcategory",pos:7},{name:"Publish",component:Ca,icon:"form",path:Na+"/publish",pos:8},{name:"News Info",component:Ma,icon:"bulb",path:Na+"/news",pos:9}]},{name:"Local Management",icon:"calendar",key:"sub2",items:[{name:"Local Client",component:St,icon:"user",path:Na+"/localclient",pos:3},{name:"Email",component:Ia,icon:"mail",path:Na+"/email",pos:10},{name:"Tracking",component:Aa,icon:"clock-circle",path:Na+"/tracking",pos:11},{name:"Member",component:Ha,icon:"team",path:Na+"/member",pos:12}]}],Ra=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,689))})),za=function(e){function t(e){var a;return Object(r.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e)),D().then((function(e){console.log("token \u6ca1\u8fc7\u671f")})),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null,"Loading ...")},i.a.createElement(Ra,{screens:Ua},i.a.createElement(se.d,null,qa.map((function(t,a){return i.a.createElement(se.b,{key:a.toString(),path:t.path,component:fe(t.component,e.props.SetPos,t.pos,t.name)})})),i.a.createElement(se.b,{path:"".concat(this.props.match.path,"/"),component:Ee}),i.a.createElement(se.a,{from:"*",to:"/404"}))))}}]),t}(n.Component),Ga=Object(be.b)((function(e){return{menuBarPos:e.menuBarReducer}}),(function(e){return{SetPos:function(t){e(function(e){return{type:"SetPos",payload:e}}(t))}}}))(Object(se.g)(za)),Wa=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).componentDidMount=function(){localStorage.getItem("token")?a.props.history.push("/dashboard"):a.props.history.push("/login")},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"Loading ...")}}]),t}(n.Component),$a=Object(se.g)(Wa),Ka=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(me.a,null,i.a.createElement(se.d,null,i.a.createElement(se.b,{exact:!0,path:"/404",component:pe}),i.a.createElement(se.b,{path:"/",exact:!0,component:$a}),i.a.createElement(se.b,{path:"/login",component:ue}),i.a.createElement(ge,{path:"/dashboard",component:Ga}),i.a.createElement(se.a,{from:"*",to:"/404"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ya=a(90),Qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SetPos":return t.payload;default:return e}},Ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setData":return t.payload;default:return e}},Xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setData":return t.payload;default:return e}},Za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setData":return t.payload;default:return e}},en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setData":return t.payload;default:return e}},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BeforeFetchData":return{isLoading:!0,data:[]};case"FetchDataSuccess":return{isLoading:!1,data:t.payload};case"FetchDataFail":var a=e.data;return{isLoading:!1,data:a};default:return e}},an={newsTitle:{title:"",title_cn:"",image:""},newsContent:{content:"",content_cn:""},stepPosition:0,finalConfirmModalVisible:!1},nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TitleStepNextClick":return{newsTitle:t.payload,StepPosition:1,newsContent:e.newsContent,finalConfirmModalVisible:!1};case"ContentStepBackClick":return{newsTitle:e.newsTitle,StepPosition:0,newsContent:e.newsContent,finalConfirmModalVisible:!1};case"ContentConfirmClick":return{newsTitle:e.newsTitle,StepPosition:1,newsContent:t.payload,finalConfirmModalVisible:!0};case"CloseFinalConfirmModal":return{newsTitle:e.newsTitle,StepPosition:1,newsContent:e.payload,finalConfirmModalVisible:!1};case"FinishPublish":return Object(Ze.a)({},an,{StepPosition:2});case"ResetAll":return Object(Ze.a)({},an);default:return e}},ln={content:"",content_cn:""},on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ConfirmContent":return{content:t.payload.content,content_cn:t.payload.content_cn};case"ResetAll":return ln;default:return e}},rn=Object(Ya.c)({menuBarReducer:Qa,lotteryReducer:Ja,localClientReducer:Xa,StaffInfoReducer:Za,BrandReducer:en,ProductCategoryReducer:tn,NewsReducer:nn,NewsEditReducer:on}),sn=a(332),cn=Object(Ya.d)(rn,Object(Ya.a)(sn.a));o.a.render(i.a.createElement(be.a,{store:cn},i.a.createElement(Ka,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[334,1,2]]]);
//# sourceMappingURL=main.0d154d49.chunk.js.map